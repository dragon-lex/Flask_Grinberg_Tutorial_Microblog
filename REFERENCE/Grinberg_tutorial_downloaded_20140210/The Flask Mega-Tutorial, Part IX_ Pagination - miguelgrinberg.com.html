<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><script src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/widgets.js" id="twitter-wjs"></script><script id="bug.surrogate.20">FB={Event:{subscribe:function(){}},UIServer:{},XFBML:{parse:function(){}},init:function(){},__noSuchMethod__:function(){}};</script><script src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/all.js" id="facebook-jssdk"></script><script id="bug.surrogate.1">var urchinTracker=function(){},_gaq={push:function(){try {if(arguments[0][0]=='_link')window.location.href=arguments[0][1]}catch(er){}}},_gat={_createTracker:function(){}, _getTracker:function(){return{__noSuchMethod__:function(){},_link:function(o){if(o)location.href=o;},_linkByPost:function(){return true;},_getLinkerUrl:function(o){return o;},_trackEvent:function(){}}}};</script><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<title>The Flask Mega-Tutorial, Part IX: Pagination - miguelgrinberg.com</title>

	<meta name="description" content="miguelgrinberg.com">
	<meta name="copyright" content="Copyright (c) 2012 Miguel Grinberg">
	<meta name="author" content="Miguel Grinberg">
    
    <meta name="keywords" content="python, programming, flask, web, tutorial, database, pagination">
    
    <link rel="shortcut icon" href="http://blog.miguelgrinberg.com/static/favicon.ico">
	<link rel="alternate" type="application/rss+xml" href="http://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/prettify.css" type="text/css" rel="stylesheet">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/colorbox.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/jquery_002.js"></script>
	<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/jquery.js"></script>
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/moment.js"></script>
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/prettify.js"></script>
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/bootstrap.css" rel="stylesheet" media="screen">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/bootstrap-responsive.css" rel="stylesheet">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/style.css" rel="stylesheet" type="text/css">
    <script src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/bootstrap.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css" media="screen, print, projection">
    </style>
    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-4777284-15']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
    <script type="text/javascript">
        $(document).ready(function(){
            $(".gallery").colorbox({rel:".gallery",maxWidth:"95%",maxHeight:"95%",scalePhotos:true});
            // add prettyprint class to all <pre><code></code></pre> blocks
            var prettify = false;
            $("pre code").parent().each(function() {
                $(this).addClass('prettyprint');
                prettify = true;
            });
            prettyPrint();
        });
    </script>
<style type="text/css">.recaptchatable td img{display:block}.recaptchatable .recaptcha_r1_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') 0 -63px no-repeat;width:318px;height:9px}.recaptchatable .recaptcha_r2_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -18px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r2_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -27px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r3_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') 0 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r3_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -18px -57px no-repeat;width:300px;height:6px}.recaptchatable .recaptcha_r3_c3{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -9px 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r4_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px 0 no-repeat;width:171px;height:49px}.recaptchatable .recaptcha_r4_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -36px 0 no-repeat;width:7px;height:57px}.recaptchatable .recaptcha_r4_c4{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -214px 0 no-repeat;width:97px;height:57px}.recaptchatable .recaptcha_r7_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px -49px no-repeat;width:171px;height:8px}.recaptchatable .recaptcha_r8_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px -49px no-repeat;width:25px;height:8px}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px}#recaptcha_area,#recaptcha_table{width:318px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;padding:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;font-family:helvetica,sans-serif;font-size:8pt;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto}.recaptchatable #recaptcha_image{position:relative;margin:auto}.recaptchatable #recaptcha_image #recaptcha_challenge_image{display:block}.recaptchatable #recaptcha_image #recaptcha_ad_image{display:block;position:absolute;top:0}.recaptchatable img{border:0!important;margin:0!important;padding:0!important}.recaptchatable a,.recaptchatable a:hover{cursor:pointer;outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;width:153px!important;height:45px!important;margin-left:7px!important;margin-right:7px!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important;background:none!important;height:auto!important;width:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{width:153px!important;position:relative!important;bottom:7px!important;padding:0!important;margin:15px 0 0 0!important;font-size:10pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1!important}#recaptcha_instructions_error{color:red!important}.recaptcha_only_if_privacy{float:right;text-align:right}#recaptcha-ad-choices{position:absolute;height:15px;top:0;right:0}#recaptcha-ad-choices img{height:15px}.recaptcha-ad-choices-collapsed{width:15px;height:15px;display:block}.recaptcha-ad-choices-expanded{width:75px;height:15px;display:none}#recaptcha-ad-choices:hover .recaptcha-ad-choices-collapsed{display:none}#recaptcha-ad-choices:hover .recaptcha-ad-choices-expanded{display:block}

.recaptcha_is_showing_audio .recaptcha_only_if_image,.recaptcha_isnot_showing_audio .recaptcha_only_if_audio,.recaptcha_had_incorrect_sol .recaptcha_only_if_no_incorrect_sol,.recaptcha_nothad_incorrect_sol .recaptcha_only_if_incorrect_sol{display:none !important}</style><style>#swdgrnbsipjufzqypjeraratwlhcgazajyfilpjh{border:solid 2px #fff !important;color:#fff !important;display:block !important;height:auto !important;margin:0 !important;opacity:0.9 !important;padding:7px 10px !important;position:fixed !important;visibility:visible !important;width:auto !important;z-index:2147483647 !important;-moz-border-radius:5px !important;border-radius:5px !important;-moz-box-shadow:0px 0px 20px #000 !important;box-shadow:0px 0px 20px #000 !important;}.swdgrnbsipjufzqypjeraratwlhcgazajyfilpjh-blocked{color:#777 !important;display:inline !important;text-decoration:line-through !important;}#swdgrnbsipjufzqypjeraratwlhcgazajyfilpjh span{background:transparent !important;}#swdgrnbsipjufzqypjeraratwlhcgazajyfilpjh div{border:0 !important;margin:0 !important;padding:0 !important;width:auto !important;letter-spacing:normal !important;font:13px Arial,Helvetica !important;text-align:left !important;text-shadow:none !important;text-transform:none !important;word-spacing:normal !important;}#swdgrnbsipjufzqypjeraratwlhcgazajyfilpjh a{font-weight:normal !important;background:none !important;text-decoration:underline !important;color:#fff !important;}@media print{#swdgrnbsipjufzqypjeraratwlhcgazajyfilpjh{display:none !important;}}</style></head>
<body style="padding-top: 40px;">
<!-- facebook sdk -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- google plus sdk -->
<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/plusone.js"></script>
<!-- twitter sdk -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<!-- linkedin sdk -->
<script src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/in.js" type="text/javascript"></script>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="http://blog.miguelgrinberg.com/">miguelgrinberg.com</a>
            <ul class="nav">
                <li><a href="http://blog.miguelgrinberg.com/">Home</a></li>
                <li><a href="http://blog.miguelgrinberg.com/post/about-me">About Me</a></li>
                <li><a href="http://blog.miguelgrinberg.com/post/about-this-blog">About This Blog</a></li>
				
            </ul>
            <div class="nav pull-right">
                <p class="navbar-text">
                    <a type="application/rss+xml" href="http://blog.miguelgrinberg.com/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss.png" alt="RSS Feed" title="RSS Feed"></a>
                    <a href="https://www.facebook.com/miguelgrinbergblog"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/facebook.png" alt="Facebook" title="Facebook"></a>
                    <a href="https://plus.google.com/u/0/117786742456929977820"><img class="yfapaxbwxrlpkwtnwicp" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/googleplus.png" alt="Google+" title="Google+"></a>
                    <a href="http://www.linkedin.com/in/miguelgrinberg"><img class="yfapaxbwxrlpkwtnwicp" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/linkedin.png" alt="LinkedIn" title="LinkedIn"></a>
                    <a href="https://twitter.com/#%21/miguelgrinberg"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/twitter.png" alt="Twitter" title="Twitter"></a>
                </p>
            </div>
        </div>
    </div>
</div>
<div id="banner"></div>
<div class="container">
    <div class="row">
        <div class="span8">
            <div id="main">
                
                
                
                
                

<div class="post">
<p class="date">
<script type="text/javascript">
document.write(moment("2012-10-06T05:43:26Z").format("LL"));
</script>October 6 2012
</p>
<div class="social-outer">
    <div class="social">
        <div class="social-box"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination" data-via="miguelgrinberg" data-count="vertical">Tweet</a></div>
        <div class="social-box" style="padding-left: 6px;"><div style="display: block;" class="fb-like" data-href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination" data-send="false" data-layout="box_count" data-width="450" data-show-faces="false" data-font="verdana"><iframe style="width: 30px; height: 19px; border: 0px none;" id="jwiceyrixkgubttirhfwfvvdfxdqizpodhn"></iframe></div></div>
        <div class="social-box"><g:plusone href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination" size="tall"></g:plusone></div>
        <div class="social-box"><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination" data-counter="top"></script></div>
    </div>
</div>
<h1 class="post-title">The Flask Mega-Tutorial, Part IX: Pagination</h1>
<div class="posted">Posted by <span class="label label-important"><a href="http://blog.miguelgrinberg.com/author/Miguel%20Grinberg">Miguel Grinberg</a></span> under <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Python">Python</a></span>, <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Programming">Programming</a></span>, <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Flask">Flask</a></span>. </div>
<div class="post_body"><p>This is the ninth article in the series in which I document my experience writing web applications in <a href="http://python.org/">Python</a> using the <a href="http://flask.pocoo.org/">Flask</a> microframework.</p>
<p>The goal of the tutorial series is to develop a decently featured 
microblogging application that demonstrating total lack of originality I
 have decided to call <code>microblog</code>.</p>
<p>Here is an index of all the articles in the series that have been published to date:</p>
<ul>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world">Part I: Hello, World!</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ii-templates">Part II: Templates</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms">Part III: Web Forms</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iv-database">Part IV: Database</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-v-user-logins">Part V: User Logins</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vi-profile-page-and-avatars">Part VI: Profile Page And Avatars</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing">Part VII: Unit Testing</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-viii-followers-contacts-and-friends">Part VIII: Followers, Contacts And Friends</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination">Part IX: Pagination</a> (this article)</li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-x-full-text-search">Part X: Full Text Search</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xi-email-support">Part XI: Email Support</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xii-facelift">Part XII: Facelift</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-dates-and-times">Part XIII: Dates and Times</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiv-i18n-and-l10n">Part XIV: I18n and L10n</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xv-ajax">Part XV: Ajax</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvi-debugging-testing-and-profiling">Part XVI: Debugging, Testing and Profiling</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi">Part XVII: Deployment on Linux (even on the Raspberry Pi!)</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud">Part XVIII: Deployment on the Heroku Cloud</a></li>
</ul>
<h2>Recap</h2>
<p>In the <a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-viii-followers-contacts-and-friends">previous article</a>
 in the series we've made all the database changes necessary to support 
the 'follower' paradigm, where users choose other users to follow.</p>
<p>Today we will build on what we did last time and enable our 
application to accept and deliver real content to its users. We are 
saying goodbye to the last of our fake objects today!</p>
<h2>Submission of blog posts</h2>
<p>Let's start with something simple. The home page should have a form for users to submit new posts.</p>
<p>First we define a single field form object (file <code>app/forms.py</code>):</p>
<pre class="prettyprint"><code><span class="kwd">class</span><span class="pln"> </span><span class="typ">PostForm</span><span class="pun">(</span><span class="typ">Form</span><span class="pun">):</span><span class="pln">
    post </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TextField</span><span class="pun">(</span><span class="str">'post'</span><span class="pun">,</span><span class="pln"> validators </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">Required</span><span class="pun">()])</span></code></pre>
<p>Next, we add the form to the template (file <code>app/templates/index.html</code>):</p>
<pre class="prettyprint"><code><span class="com">&lt;!-- extend base layout --&gt;</span><span class="pln">
{% extends "base.html" %}

{% block content %}
</span><span class="tag">&lt;h1&gt;</span><span class="pln">Hi, {{g.user.nickname}}!</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
</span><span class="tag">&lt;form</span><span class="pln"> </span><span class="atn">action</span><span class="pun">=</span><span class="atv">""</span><span class="pln"> </span><span class="atn">method</span><span class="pun">=</span><span class="atv">"post"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"post"</span><span class="tag">&gt;</span><span class="pln">
    {{form.hidden_tag()}}
    </span><span class="tag">&lt;table&gt;</span><span class="pln">
        </span><span class="tag">&lt;tr&gt;</span><span class="pln">
            </span><span class="tag">&lt;td&gt;</span><span class="pln">Say something:</span><span class="tag">&lt;/td&gt;</span><span class="pln">
            </span><span class="tag">&lt;td&gt;</span><span class="pln">{{ form.post(size = 30, maxlength = 140) }}</span><span class="tag">&lt;/td&gt;</span><span class="pln">
            </span><span class="tag">&lt;td&gt;</span><span class="pln">
            {% for error in form.errors.post %}
            </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="pln">color</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">[{{error}}]</span><span class="tag">&lt;/span&gt;&lt;br&gt;</span><span class="pln">
            {% endfor %}
            </span><span class="tag">&lt;/td&gt;</span><span class="pln">
        </span><span class="tag">&lt;/tr&gt;</span><span class="pln">
        </span><span class="tag">&lt;tr&gt;</span><span class="pln">
            </span><span class="tag">&lt;td&gt;&lt;/td&gt;</span><span class="pln">
            </span><span class="tag">&lt;td&gt;&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"submit"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"Post!"</span><span class="tag">&gt;&lt;/td&gt;</span><span class="pln">
            </span><span class="tag">&lt;td&gt;&lt;/td&gt;</span><span class="pln">
        </span><span class="tag">&lt;/tr&gt;</span><span class="pln">
    </span><span class="tag">&lt;/table&gt;</span><span class="pln">
</span><span class="tag">&lt;/form&gt;</span><span class="pln">
{% for post in posts %}
</span><span class="tag">&lt;p&gt;</span><span class="pln">
  {{post.author.nickname}} says: </span><span class="tag">&lt;b&gt;</span><span class="pln">{{post.body}}</span><span class="tag">&lt;/b&gt;</span><span class="pln">
</span><span class="tag">&lt;/p&gt;</span><span class="pln">
{% endfor %}
{% endblock %}</span></code></pre>
<p>Nothing earth shattering so far, as you can see. We are simply adding yet another form, like the ones we've done before.</p>
<p>Last of all, the view function that ties everything together is expanded to handle the form (file <code>app/views.py</code>):</p>
<pre class="prettyprint"><code><span class="kwd">from</span><span class="pln"> forms </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">LoginForm</span><span class="pun">,</span><span class="pln"> </span><span class="typ">EditForm</span><span class="pun">,</span><span class="pln"> </span><span class="typ">PostForm</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> models </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">User</span><span class="pun">,</span><span class="pln"> ROLE_USER</span><span class="pun">,</span><span class="pln"> ROLE_ADMIN</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Post</span><span class="pln">

</span><span class="lit">@app</span><span class="pun">.</span><span class="pln">route</span><span class="pun">(</span><span class="str">'/'</span><span class="pun">,</span><span class="pln"> methods </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'GET'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'POST'</span><span class="pun">])</span><span class="pln">
</span><span class="lit">@app</span><span class="pun">.</span><span class="pln">route</span><span class="pun">(</span><span class="str">'/index'</span><span class="pun">,</span><span class="pln"> methods </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'GET'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'POST'</span><span class="pun">])</span><span class="pln">
</span><span class="lit">@login_required</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> index</span><span class="pun">():</span><span class="pln">
    form </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PostForm</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> form</span><span class="pun">.</span><span class="pln">validate_on_submit</span><span class="pun">():</span><span class="pln">
        post </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Post</span><span class="pun">(</span><span class="pln">body </span><span class="pun">=</span><span class="pln"> form</span><span class="pun">.</span><span class="pln">post</span><span class="pun">.</span><span class="pln">data</span><span class="pun">,</span><span class="pln"> timestamp </span><span class="pun">=</span><span class="pln"> datetime</span><span class="pun">.</span><span class="pln">utcnow</span><span class="pun">(),</span><span class="pln"> author </span><span class="pun">=</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">user</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">post</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">commit</span><span class="pun">()</span><span class="pln">
        flash</span><span class="pun">(</span><span class="str">'Your post is now live!'</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> redirect</span><span class="pun">(</span><span class="pln">url_for</span><span class="pun">(</span><span class="str">'index'</span><span class="pun">))</span><span class="pln">
    posts </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="pun">{</span><span class="pln"> 
            </span><span class="str">'author'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'nickname'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'John'</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
            </span><span class="str">'body'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Beautiful day in Portland!'</span><span class="pln"> 
        </span><span class="pun">},</span><span class="pln">
        </span><span class="pun">{</span><span class="pln"> 
            </span><span class="str">'author'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'nickname'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Susan'</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
            </span><span class="str">'body'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'The Avengers movie was so cool!'</span><span class="pln"> 
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">]</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> render_template</span><span class="pun">(</span><span class="str">'index.html'</span><span class="pun">,</span><span class="pln">
        title </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Home'</span><span class="pun">,</span><span class="pln">
        form </span><span class="pun">=</span><span class="pln"> form</span><span class="pun">,</span><span class="pln">
        posts </span><span class="pun">=</span><span class="pln"> posts</span><span class="pun">)</span></code></pre>
<p>Let's review the changes in this function one by one:</p>
<ul>
<li>We are now importing the <code>Post</code> and <code>PostForm</code> classes</li>
<li>We accept POST requests in both routes associated with the <code>index</code> view function, since that is how we will receive submitted posts.</li>
<li>When we arrive at this view function through a form submission we insert a new <code>Post</code> record into the database. When we arrive at it via a regular GET request we do as before.</li>
<li>The template now receives an additional argument, the <code>form</code>, so that it can render the text field.</li>
</ul>
<p>One final comment before we continue. Notice how after we insert a new <code>Post</code> into the detabase we do this:</p>
<pre class="prettyprint"><code><span class="kwd">return</span><span class="pln"> redirect</span><span class="pun">(</span><span class="pln">url_for</span><span class="pun">(</span><span class="str">'index'</span><span class="pun">))</span></code></pre>
<p>We could have easily skipped the redirect and allowed the function to
 continue down into the template rendering part, and it would have been 
more efficient. Because really, all the redirect does is return to this 
same view function to do that, after an extra trip to the client web 
browser.</p>
<p>So, why the redirect? Consider what happens after the user writes a 
blog post, submits it and then hits the browser's refresh key. What will
 the refresh command do? Browsers resend the last issued request as a 
result of a refresh command.</p>
<p>Without the redirect, the last request is the POST request that 
submitted the form, so a refresh action will resubmit the form, causing a
 second <code>Post</code> record that is identical to the first to be written to the database. Not good.</p>
<p>By having the redirect, we force the browser to issue another request
 after the form submission, the one that grabs the redirected page. This
 is a simple GET request, so a refresh action will now repeat the GET 
request instead of submitting the form again.</p>
<p>This simple trick avoids inserting duplicate posts when a user inadvertently refreshes the page after submitting a blog post.</p>
<h2>Displaying blog posts</h2>
<p>And now we get to the fun part. We are going to grab blog posts from the database and display them.</p>
<p>If you recall from a few articles ago, we created a couple of <em>fake</em> posts and we've been displaying those in our home page for a long time. The fake objects were created explicitly in the <code>index</code> view function as a simply Python list:</p>
<pre class="prettyprint"><code><span class="pln">    posts </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="pun">{</span><span class="pln"> 
            </span><span class="str">'author'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'nickname'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'John'</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
            </span><span class="str">'body'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Beautiful day in Portland!'</span><span class="pln"> 
        </span><span class="pun">},</span><span class="pln">
        </span><span class="pun">{</span><span class="pln"> 
            </span><span class="str">'author'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'nickname'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Susan'</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
            </span><span class="str">'body'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'The Avengers movie was so cool!'</span><span class="pln"> 
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">]</span></code></pre>
<p>But in the last article we created the query that allows us to get 
all the posts from followed users, so now we can simply replace the 
above with this (file <code>app/views.py</code>):</p>
<pre class="prettyprint"><code><span class="pln">    posts </span><span class="pun">=</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">followed_posts</span><span class="pun">().</span><span class="pln">all</span><span class="pun">()</span></code></pre>
<p>And when you run the application you will be seeing blog posts from the database!</p>
<p>The <code>followed_posts</code> method of the <code>User</code> class returns a sqlalchemy query object that is configured to grab the posts we are interested in. Calling <code>all()</code>
 on this query just retrieves all the posts into a list, so we end up 
with a structure that is very much alike the fake one we've been using 
until now. It's so close that the template does not even notice.</p>
<p>At this point feel free to play with the application. You can create a
 few users, make them follow others, and finally post some messages to 
see how each user sees its blog post stream.</p>
<h2>Pagination</h2>
<p>The application is looking better than ever, but we have a problem. 
We are showing all of the followed posts in the home page. What happens 
if a user has a thousand followed posts? Or a million? As you can 
imagine, grabbing and handling such a large list of objects will be 
extremely inefficient.</p>
<p>Instead, we are going to show this potentially large number of posts in groups, or <em>pages</em>.</p>
<p>Flask-SQLAlchemy comes with very good support for <em>pagination</em>. If for example, we wanted to get the first three followed posts of some user we can do this:</p>
<pre class="prettyprint"><code><span class="pln">    posts </span><span class="pun">=</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">followed_posts</span><span class="pun">().</span><span class="pln">paginate</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">False</span><span class="pun">).</span><span class="pln">items</span></code></pre>
<p>The <code>paginate</code> method can be called on any query object. It takes three arguments:</p>
<ul>
<li>the page number, starting from 1,</li>
<li>the number of items per page,</li>
<li>an error flag. If True, when an out of range page is requested a 404
 error will be automatically returned to the client web browser. If 
False, an empty list will be returned instead of an error.</li>
</ul>
<p>The return value from <code>paginate</code> is a <code>Pagination</code> object. The <code>items</code> member of this object contains the list of items in the requested page. There are other useful things in the <code>Pagination</code> object that we will see a bit later.</p>
<p>Now let's think about how we can implement pagination in our <code>index</code>
 view function. We can start by adding a configuration item to our 
application that determines how many items per page we will display 
(file <code>config.py</code>):</p>
<pre class="prettyprint"><code><span class="com"># pagination</span><span class="pln">
POSTS_PER_PAGE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span></code></pre>
<p>It is a good idea to have these global <code>knobs</code> that can 
change the behavior of our application in the configuration file all 
together, because then we can go to a single place to revise them all.</p>
<p>In the final application we will of course use a much larger number 
than 3, but for testing it is useful to work with small numbers.</p>
<p>Next, let's decide how the URLs that request different pages will 
look. We've seen before that Flask routes can take arguments, so we can 
add a suffix to the URL that indicates the desired page:</p>
<pre class="prettyprint"><code><span class="pln">http</span><span class="pun">:</span><span class="com">//localhost:5000/         &lt;-- page #1 (default)</span><span class="pln">
http</span><span class="pun">:</span><span class="com">//localhost:5000/index    &lt;-- page #1 (default)</span><span class="pln">
http</span><span class="pun">:</span><span class="com">//localhost:5000/index/1  &lt;-- page #1</span><span class="pln">
http</span><span class="pun">:</span><span class="com">//localhost:5000/index/2  &lt;-- page #2</span></code></pre>
<p>This format of URLs can be easily implemented with an additional <code>route</code> added to our view function (file <code>app/views.py</code>):</p>
<pre class="prettyprint"><code><span class="kwd">from</span><span class="pln"> config </span><span class="kwd">import</span><span class="pln"> POSTS_PER_PAGE

</span><span class="lit">@app</span><span class="pun">.</span><span class="pln">route</span><span class="pun">(</span><span class="str">'/'</span><span class="pun">,</span><span class="pln"> methods </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'GET'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'POST'</span><span class="pun">])</span><span class="pln">
</span><span class="lit">@app</span><span class="pun">.</span><span class="pln">route</span><span class="pun">(</span><span class="str">'/index'</span><span class="pun">,</span><span class="pln"> methods </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'GET'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'POST'</span><span class="pun">])</span><span class="pln">
</span><span class="lit">@app</span><span class="pun">.</span><span class="pln">route</span><span class="pun">(</span><span class="str">'/index/&lt;int:page&gt;'</span><span class="pun">,</span><span class="pln"> methods </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'GET'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'POST'</span><span class="pun">])</span><span class="pln">
</span><span class="lit">@login_required</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> index</span><span class="pun">(</span><span class="pln">page </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">):</span><span class="pln">
    form </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PostForm</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> form</span><span class="pun">.</span><span class="pln">validate_on_submit</span><span class="pun">():</span><span class="pln">
        post </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Post</span><span class="pun">(</span><span class="pln">body </span><span class="pun">=</span><span class="pln"> form</span><span class="pun">.</span><span class="pln">post</span><span class="pun">.</span><span class="pln">data</span><span class="pun">,</span><span class="pln"> timestamp </span><span class="pun">=</span><span class="pln"> datetime</span><span class="pun">.</span><span class="pln">utcnow</span><span class="pun">(),</span><span class="pln"> author </span><span class="pun">=</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">user</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">post</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">commit</span><span class="pun">()</span><span class="pln">
        flash</span><span class="pun">(</span><span class="str">'Your post is now live!'</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> redirect</span><span class="pun">(</span><span class="pln">url_for</span><span class="pun">(</span><span class="str">'index'</span><span class="pun">))</span><span class="pln">
    posts </span><span class="pun">=</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">followed_posts</span><span class="pun">().</span><span class="pln">paginate</span><span class="pun">(</span><span class="pln">page</span><span class="pun">,</span><span class="pln"> POSTS_PER_PAGE</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">False</span><span class="pun">).</span><span class="pln">items
    </span><span class="kwd">return</span><span class="pln"> render_template</span><span class="pun">(</span><span class="str">'index.html'</span><span class="pun">,</span><span class="pln">
        title </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Home'</span><span class="pun">,</span><span class="pln">
        form </span><span class="pun">=</span><span class="pln"> form</span><span class="pun">,</span><span class="pln">
        posts </span><span class="pun">=</span><span class="pln"> posts</span><span class="pun">)</span></code></pre>
<p>Our new route takes the page argument, and declares it as an integer. We also need to add the <code>page</code> argument to the <code>index</code>
 function, and we have to give it a default value because two of the 
three routes do not have this argument, so for those the default will 
always be used.</p>
<p>And now that we have a page number available to us we can easily hook it up to our <code>followed_posts</code> query, along with the POSTS_PER_PAGE configuration constant we defined earlier.</p>
<p>Note how easy these changes are, and how little code is affected each
 time we make a change. We are trying to write each part of the 
application without making any assumptions regarding how the other parts
 work, and this enables us to write modular and robust applications that
 are easier to test and are less likely to fail or have bugs.</p>
<p>At this point you can try the pagination by entering URLs for the 
different pages by hand into your browser's address bar. Make sure you 
have more than three posts available so that you can see more than one 
page.</p>
<h2>Page navigation</h2>
<p>We now need to add links that allow users to navigate to the next 
and/or previous pages, and luckily this is extremely easy to do, 
Flask-SQLAlchemy does most of the work for us.</p>
<p>We are going to start by making a small change in the view function. 
In our current version we use the paginate method as follows:</p>
<pre class="prettyprint"><code><span class="pln">posts </span><span class="pun">=</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">followed_posts</span><span class="pun">().</span><span class="pln">paginate</span><span class="pun">(</span><span class="pln">page</span><span class="pun">,</span><span class="pln"> POSTS_PER_PAGE</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">False</span><span class="pun">).</span><span class="pln">items</span></code></pre>
<p>By doing this we are only keeping the <code>items</code> member of the <code>Pagination</code> object returned by <code>paginate</code>. But this object has a number of other very useful things in it, so we will instead keep the whole object (file <code>app/views.py</code>):</p>
<pre class="prettyprint"><code><span class="pln">posts </span><span class="pun">=</span><span class="pln"> g</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">followed_posts</span><span class="pun">().</span><span class="pln">paginate</span><span class="pun">(</span><span class="pln">page</span><span class="pun">,</span><span class="pln"> POSTS_PER_PAGE</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">False</span><span class="pun">)</span></code></pre>
<p>To compensate for this change, we have to modify the template (file <code>app/templates/index.html</code>):</p>
<pre class="prettyprint"><code><span class="com">&lt;!-- posts is a Paginate object --&gt;</span><span class="pln">
{% for post in posts.items %}
</span><span class="tag">&lt;p&gt;</span><span class="pln">
  {{post.author.nickname}} says: </span><span class="tag">&lt;b&gt;</span><span class="pln">{{post.body}}</span><span class="tag">&lt;/b&gt;</span><span class="pln">
</span><span class="tag">&lt;/p&gt;</span><span class="pln">
{% endfor %}</span></code></pre>
<p>What this change does is make the full Paginate object available to 
our template. The members of this object that we will use are:</p>
<ul>
<li><code>has_next</code>: True if there is at least one more page after the current one</li>
<li><code>has_prev</code>: True if there is at least one more page before the current one</li>
<li><code>next_num</code>: page number for the next page</li>
<li><code>prev_num</code>: page number for the previous page</li>
</ul>
<p>With these for elements we can produce the following (file <code>app/templates/index.html</code>):</p>
<pre class="prettyprint"><code><span class="com">&lt;!-- posts is a Paginate object --&gt;</span><span class="pln">
{% for post in posts.items %}
</span><span class="tag">&lt;p&gt;</span><span class="pln">
  {{post.author.nickname}} says: </span><span class="tag">&lt;b&gt;</span><span class="pln">{{post.body}}</span><span class="tag">&lt;/b&gt;</span><span class="pln">
</span><span class="tag">&lt;/p&gt;</span><span class="pln">
{% endfor %}
{% if posts.has_prev %}</span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"{{ url_for('index', page = posts.prev_num) }}"</span><span class="tag">&gt;</span><span class="pln">&lt;&lt; Newer posts</span><span class="tag">&lt;/a&gt;</span><span class="pln">{% else %}&lt;&lt; Newer posts{% endif %} | 
{% if posts.has_next %}</span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"{{ url_for('index', page = posts.next_num) }}"</span><span class="tag">&gt;</span><span class="pln">Older posts &gt;&gt;</span><span class="tag">&lt;/a&gt;</span><span class="pln">{% else %}Older posts &gt;&gt;{% endif %}</span></code></pre>
<p>So we have two links. First we have one labeled "Newer posts" that 
sends us to the previous page (keep in mind we show posts sorted by 
newest first, so the first page is the one with the newest stuff). 
Conversely, the "Older posts" points to the next page.</p>
<p>When we are looking at the first page we do not want to show a link 
to go to the previous page, since there isn't one. This is easy to 
detect because <code>posts.has_prev</code> will be <code>False</code>. 
We handle that case simply by showing the same text of the link but 
without the link itself. The link to the next page is handled in the 
same way.</p>
<h2>Implementing the Post sub-template</h2>
<p>Back in the article where we added <a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vi-profile-page-and-avatars">avatar pictures</a>
 we defined a sub-template with the HTML rendering of a single post. The
 reason we created this sub-template was so that we can render posts 
with a consistent look in multiple pages, without having to duplicate 
the HTML code.</p>
<p>It is now time to implement this sub-template in our index page. And,
 as most of the things we are doing today, it is surprisingly simple 
(file <code>app/templates/index.html</code>):</p>
<pre class="prettyprint"><code><span class="com">&lt;!-- posts is a Paginate object --&gt;</span><span class="pln">
{% for post in posts.items %}
    {% include 'post.html' %}
{% endfor %}</span></code></pre>
<p>Amazing, huh? We just discarded our old rendering code and replaced it with an <code>include</code> of the sub-template. Just with this, we get the nicer version of the post that includes the user's avatar.</p>
<p>Here is a screenshot of the index page of our application in its current state:</p>
<p></p><center><img alt="microblog profile page" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/flask-mega-tutorial-part-ix.png"></center><p></p>
<h2>The user profile page</h2>
<p>We are done with the index page for now. However, we have also 
included posts in the user profile page, not posts from everyone but 
just from the owner of the profile. To be consistent the user profile 
page should be changed to match the index page.</p>
<p>The changes are similar to those we made on the index page. Here is a summary of what we need to do:</p>
<ul>
<li>add an additional route that takes the page number</li>
<li>add a <code>page</code> argument to the view function, with a default of 1</li>
<li>replace the list of fake posts with the proper database query and pagination</li>
<li>update the template to use the pagination object</li>
</ul>
<p>Here is the updated view function (file <code>app/views.py</code>):</p>
<pre class="prettyprint"><code><span class="lit">@app</span><span class="pun">.</span><span class="pln">route</span><span class="pun">(</span><span class="str">'/user/&lt;nickname&gt;'</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@app</span><span class="pun">.</span><span class="pln">route</span><span class="pun">(</span><span class="str">'/user/&lt;nickname&gt;/&lt;int:page&gt;'</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@login_required</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> user</span><span class="pun">(</span><span class="pln">nickname</span><span class="pun">,</span><span class="pln"> page </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">):</span><span class="pln">
    user </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">.</span><span class="pln">query</span><span class="pun">.</span><span class="pln">filter_by</span><span class="pun">(</span><span class="pln">nickname </span><span class="pun">=</span><span class="pln"> nickname</span><span class="pun">).</span><span class="pln">first</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> user </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln">
        flash</span><span class="pun">(</span><span class="str">'User '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> nickname </span><span class="pun">+</span><span class="pln"> </span><span class="str">' not found.'</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> redirect</span><span class="pun">(</span><span class="pln">url_for</span><span class="pun">(</span><span class="str">'index'</span><span class="pun">))</span><span class="pln">
    posts </span><span class="pun">=</span><span class="pln"> user</span><span class="pun">.</span><span class="pln">posts</span><span class="pun">.</span><span class="pln">paginate</span><span class="pun">(</span><span class="pln">page</span><span class="pun">,</span><span class="pln"> POSTS_PER_PAGE</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">False</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> render_template</span><span class="pun">(</span><span class="str">'user.html'</span><span class="pun">,</span><span class="pln">
        user </span><span class="pun">=</span><span class="pln"> user</span><span class="pun">,</span><span class="pln">
        posts </span><span class="pun">=</span><span class="pln"> posts</span><span class="pun">)</span></code></pre>
<p>Note that this function already had an argument (the nickname of the user), so we add the page number as a second argument.</p>
<p>The changes to the template are also pretty simple (file <code>app/templates/user.html</code>):</p>
<pre class="prettyprint"><code><span class="com">&lt;!-- posts is a Paginate object --&gt;</span><span class="pln">
{% for post in posts.items %}
    {% include 'post.html' %}
{% endfor %}
{% if posts.has_prev %}</span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"{{ url_for('user', nickname = user.nickname, page = posts.prev_num) }}"</span><span class="tag">&gt;</span><span class="pln">&lt;&lt; Newer posts</span><span class="tag">&lt;/a&gt;</span><span class="pln">{% else %}&lt;&lt; Newer posts{% endif %} | 
{% if posts.has_next %}</span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"{{ url_for('user', nickname = user.nickname, page = posts.next_num) }}"</span><span class="tag">&gt;</span><span class="pln">Older posts &gt;&gt;</span><span class="tag">&lt;/a&gt;</span><span class="pln">{% else %}Older posts &gt;&gt;{% endif %}</span></code></pre>
<h2>Final words</h2>
<p>Below I'm making available the updated version of the <code>microblog</code> application with all the pagination changes introduced in this article.</p>
<p>Download <a href="https://github.com/miguelgrinberg/microblog/archive/v0.9.zip">microblog-0.9.zip</a>.</p>
<p>As always, a database isn't provided so you have to create your own. 
If you are following this series of articles you know how to do it. If 
not, then go back to the database article to find out.</p>
<p>As always, I thank you for following my tutorial. I hope to see you again in the next one!</p>
<p>Miguel</p></div>
<div class="social-mini"><table><tbody><tr>
    <td><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination" data-via="miguelgrinberg" data-count="none">Tweet</a></td>
    <td><g:plusone href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination" size="medium" witdh="100" annotation="none"></g:plusone></td>
    <td><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination"></script></td>
    <td><div style="display: block;" class="fb-like" data-href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false" data-font="verdana"><iframe style="width: 30px; height: 19px; border: 0px none;" id="ndchernzzzyokzncknggyfnywmkrluboq"></iframe></div></td>
</tr></tbody></table></div>

<h4 style="text-align: right"><a name="comments"></a>56 comments</h4>


<div class="comment">
    <ul>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#1</span> <span class="label label-info">Siros</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-10-08T11:23:46Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Thank you so much again , this is very helpful.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#2</span> <span class="label label-info">Sean</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-10-13T03:35:17Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great series! This is the most helpful Python/Flask tutorial I have read. Thank you very much!!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#3</span> <span class="label label-info">Bobby</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-11-25T00:50:47Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">This tutorial is 
amazing....really great!!  Thanks for sharing your skills with us.  Two 
small points:  your index function example above is missing "user = 
g.user";  it might be helpful to explain to people what the 
"form.hidden_tag()" does.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/53d8002b748b83ec10a0b63038b4af46.png"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#4</span> <span class="label label-info">Bobby</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-11-25T01:04:25Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">can you tell me 
why my route decorators need the trailing slash to work?  
@app.route('/login/')  I'm sure I'm doing something silly??</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#5</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-11-25T06:30:03Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Bobby: hidden 
tags were covered in part 3 of the series. Can you expand on the "user =
 g.user" comment? What would that achieve?</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/53d8002b748b83ec10a0b63038b4af46.png"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#6</span> <span class="label label-info">Bobby</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-11-25T17:30:16Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">in an earlier part
 of the tutorial, we were passing the user into the index template to 
say "Hello Bobby"...I guess that got dropped somewhere and I missed it. 
 Can you tell me why my routes need the trailing "/"?</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/729e26a2a2c7ff24a71958d4aa4e5f35.jpg"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#7</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-11-26T02:58:12Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Bobby: I'm not 
sure why you need trailing slashes. Are you using the development web 
server when you run the application? The only idea I can offer is that a
 different web server might be redirecting requests without a trailing 
slash. Check in the debugging console of your browser to see what's 
happening. Then please let me know as I would like to know!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#8</span> <span class="label label-info">Dogukan Tufekci</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-02-08T16:45:17Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Miguel thanks for
 another great tutorial. You are making my life so easy in this journey 
to understand Flask.

I noticed that posts on a user's profile are not sorted by date. So I 
tweaked the code this way. Not sure if there's a better way to do this:

class User(db.Model):
#....
def sorted_posts(self):
		return Post.query.filter(Post.user_id == 
self.id).order_by(Post.timestamp.desc())</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/729e26a2a2c7ff24a71958d4aa4e5f35.jpg"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#9</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-02-09T08:22:31Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Dogukan: you are 
right, I missed the sorting! You could simplify your solution a bit, the
 sorted_posts() method can be implemented as "return 
self.posts.order_by(Post.timestamp.desc())". I will update the article 
to include this. Thanks.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/bafafefac4abe76b1218317d841e167b.jpg"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#10</span> <span class="label label-info">Dogukan Tufekci</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-02-11T18:21:36Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Miguel That's much simpler indeed! Thanks!</p>
                </div>
            </div>
        </li>
        
    </ul>
    <!--
    <table width="100%">
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/110b30a978c33ff4802bc119b47a1122?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#1</span> <span class="label label-info">Siros</span> said
                <script type="text/javascript">
                document.write(moment("2012-10-08T11:23:46Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Thank you so much again , this is very helpful.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/500b5c9e49563b18fc194cbd0285fe31?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#2</span> <span class="label label-info">Sean</span> said
                <script type="text/javascript">
                document.write(moment("2012-10-13T03:35:17Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Great series! This is the most helpful Python/Flask tutorial I have read. Thank you very much!!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/53d8002b748b83ec10a0b63038b4af46?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#3</span> <span class="label label-info">Bobby</span> said
                <script type="text/javascript">
                document.write(moment("2012-11-25T00:50:47Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">This tutorial is amazing....really great!!  Thanks for sharing your skills with us.  Two small points:  your index function example above is missing &#34;user = g.user&#34;;  it might be helpful to explain to people what the &#34;form.hidden_tag()&#34; does.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/53d8002b748b83ec10a0b63038b4af46?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#4</span> <span class="label label-info">Bobby</span> said
                <script type="text/javascript">
                document.write(moment("2012-11-25T01:04:25Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">can you tell me why my route decorators need the trailing slash to work?  @app.route(&#39;/login/&#39;)  I&#39;m sure I&#39;m doing something silly??aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#5</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2012-11-25T06:30:03Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Bobby: hidden tags were covered in part 3 of the series. Can you expand on the &#34;user = g.user&#34; comment? What would that achieve?aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/53d8002b748b83ec10a0b63038b4af46?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#6</span> <span class="label label-info">Bobby</span> said
                <script type="text/javascript">
                document.write(moment("2012-11-25T17:30:16Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">in an earlier part of the tutorial, we were passing the user into the index template to say &#34;Hello Bobby&#34;...I guess that got dropped somewhere and I missed it.  Can you tell me why my routes need the trailing &#34;/&#34;?aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#7</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2012-11-26T02:58:12Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Bobby: I&#39;m not sure why you need trailing slashes. Are you using the development web server when you run the application? The only idea I can offer is that a different web server might be redirecting requests without a trailing slash. Check in the debugging console of your browser to see what&#39;s happening. Then please let me know as I would like to know!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/bafafefac4abe76b1218317d841e167b?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#8</span> <span class="label label-info">Dogukan Tufekci</span> said
                <script type="text/javascript">
                document.write(moment("2013-02-08T16:45:17Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Miguel thanks for another great tutorial. You are making my life so easy in this journey to understand Flask.

I noticed that posts on a user&#39;s profile are not sorted by date. So I tweaked the code this way. Not sure if there&#39;s a better way to do this:

class User(db.Model):
#....
def sorted_posts(self):
		return Post.query.filter(Post.user_id == self.id).order_by(Post.timestamp.desc())aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#9</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2013-02-09T08:22:31Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Dogukan: you are right, I missed the sorting! You could simplify your solution a bit, the sorted_posts() method can be implemented as &#34;return self.posts.order_by(Post.timestamp.desc())&#34;. I will update the article to include this. Thanks.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/bafafefac4abe76b1218317d841e167b?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#10</span> <span class="label label-info">Dogukan Tufekci</span> said
                <script type="text/javascript">
                document.write(moment("2013-02-11T18:21:36Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Miguel That&#39;s much simpler indeed! Thanks!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    </table>
    -->
</div>

<div class="page">
<ul class="pager">
  <li class="previous disabled">
    <a href="#">««</a>
  </li>
  <li class="previous disabled">
    <a href="#">«</a>
  </li>
  <li class="next">
    <a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination/page/0#comments">»»</a>
  </li>
  <li class="next">
    <a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination/page/2#comments">»</a>
  </li>
</ul>
</div>

<h3><a name="commentform"></a>Leave a Comment</h3>
<div class="commentform">
<form class="form-horizontal" method="post" action="#commentform">
<div style="display:none;"><input id="csrf_token" name="csrf_token" value="20140210210229##92105533c1202e37d1b835feba0da5204c13df42" type="hidden"></div>

<div class="control-group">
    <label class="control-label" for="name">Name <span class="label label-important">*</span></label>
    <div class="controls"><input class="span5" id="name" name="name" type="text"></div>
</div>
<div class="control-group">
    <label class="control-label" for="url">Website</label>
    <div class="controls"><input class="span5" id="url" name="url" type="text"></div>
</div>
<div class="control-group">
    <label class="control-label" for="email">Email <span class="label label-important">*</span></label>
    <div class="controls"><input class="span5" id="email" name="email" type="text"></div>
</div>

<div class="control-group">
    <label class="control-label" for="comment">Comment <span class="label label-important">*</span></label>
    <div class="controls"><textarea class="span5" id="comment" name="comment" rows="4"></textarea><img style="cursor: pointer ! important; display: none ! important; position: absolute ! important; padding: 0px ! important; margin: 0px ! important; border: medium none ! important; width: 28px ! important; height: 14px ! important; opacity: 0.0152174 ! important; left: 664px ! important; top: 11448px ! important;" title="It's All Text!" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/gumdrop.png"></div>
</div>

<div class="control-group">
    <div class="controls">
<script type="text/javascript">var RecaptchaOptions = {"theme": "white", "custom_translations": {"incorrect_try_again": "Incorrect. Try again.", "help_btn": "Help", "cant_hear_this": "Download sound as MP3", "instructions_audio": "Type what you hear:", "instructions_visual": "Type the two words:", "refresh_btn": "Get a new challenge", "play_again": "Play sound again", "visual_challenge": "Get a visual challenge", "audio_challenge": "Get an audio challenge"}};</script>
<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/challenge.js"></script><script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/recaptcha.js"></script><div class=" recaptcha_nothad_incorrect_sol recaptcha_isnot_showing_audio" id="recaptcha_widget_div" style=""><div id="recaptcha_area"><table id="recaptcha_table" class="recaptchatable recaptcha_theme_white"> <tbody><tr> <td colspan="6" class="recaptcha_r1_c1"></td> </tr> <tr> <td class="recaptcha_r2_c1"></td> <td colspan="4" class="recaptcha_image_cell"><center><div style="width: 300px; height: 57px;" id="recaptcha_image"><img id="recaptcha_challenge_image" alt="reCAPTCHA challenge image" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/image.jpg" height="57" width="300"></div></center></td> <td class="recaptcha_r2_c2"></td> </tr> <tr> <td rowspan="6" class="recaptcha_r3_c1"></td> <td colspan="4" class="recaptcha_r3_c2"></td> <td rowspan="6" class="recaptcha_r3_c3"></td> </tr> <tr> <td rowspan="3" class="recaptcha_r4_c1" height="49"> <div class="recaptcha_input_area"> <span style="display: none;" id="recaptcha_challenge_field_holder"><input name="recaptcha_challenge_field" id="recaptcha_challenge_field" value="03AHJ_VusrQRLYYrZnWqFhqwuQehJcGwMA05R53EWnsCEL8c5xn0Bzl_6rApRHuG6w2kW05dbsbcbQPXjDeNqz1qcHiLs4rVO47CUffLOBRkeWNgxXJos6GzuOJ5_xRFSRnxHyvZvJGSOnpfTM1yOCdw3b6UqqLb1iPY8vcMJzPmKuQGxkVDxviEQ" type="hidden"></span><input autocomplete="off" name="recaptcha_response_field" id="recaptcha_response_field" autocorrect="off" autocapitalize="off" placeholder="Type the two words" type="text"> <span id="recaptcha_privacy" class="recaptcha_only_if_privacy"><a target="_blank" href="http://www.google.com/intl/en/policies/">Privacy &amp; Terms</a></span> </div> </td> <td rowspan="4" class="recaptcha_r4_c2"></td> <td><a title="Get a new challenge" id="recaptcha_reload_btn"><img alt="Get a new challenge" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/refresh.gif" id="recaptcha_reload" height="17" width="25"></a></td> <td rowspan="4" class="recaptcha_r4_c4"></td> </tr> <tr> <td><a title="Get an audio challenge" id="recaptcha_switch_audio_btn" class="recaptcha_only_if_image"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/audio.gif" id="recaptcha_switch_audio" alt="Get an audio challenge" height="16" width="25"></a><a title="Get a visual challenge" id="recaptcha_switch_img_btn" class="recaptcha_only_if_audio"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/text.gif" id="recaptcha_switch_img" alt="Get a visual challenge" height="16" width="25"></a></td> </tr> <tr> <td><a title="Help" id="recaptcha_whatsthis_btn"><img alt="Help" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/help.gif" id="recaptcha_whatsthis" height="16" width="25"></a></td> </tr> <tr> <td class="recaptcha_r7_c1"></td> <td class="recaptcha_r8_c1"></td> </tr> </tbody></table> </div></div>
<noscript>
  <div><iframe src="http://api.recaptcha.net/noscript?k=6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S" height="300" width="500"></iframe></div>
  <div><textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
  <input type="hidden" name="recaptcha_response_field" value="manual_challenge"></div>
</noscript>
</div>
</div>

<div class="control-group">
    <div class="controls"><input name="submit" class="btn btn-primary" value="Post Comment" type="submit"> <span class="help-inline">Note: all comments are screened before they are published. Thank you for your patience!</span></div>
</div>
</form>
</div>


</div>

            </div>
        </div>
        <div class="span4">
            <div id="sidebar">
                <h1>About Miguel</h1>
                <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/miguel.jpg">
                <p>Welcome to my blog!</p>
                <p>I'm a software engineer, photographer and filmmaker in Portland, Oregon, USA.</p>
                <p>You can also find me on <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a>, <a href="https://plus.google.com/u/0/117786742456929977820">Google+</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a> and <a href="https://twitter.com/#%21/miguelgrinberg">Twitter</a>.</p>
                <p>Thank you for visiting!</p>
                <h1>Flask Web Development Book</h1>
                <p>I'm currently writing a book on web development with 
Python and Flask, to be published by O'Reilly Media in 2014. The 
official site for this book is <a href="http://flaskbook.com/">http://flaskbook.com</a>.</p>
                <center><a href="http://flaskbook.com/"><img style="border: 1px solid black;" src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/flask-book-cover-tiny.png"></a></center>
                <h1>Flask Tutorial at PyCon 2014</h1>
                <p>If you want to learn Flask in a class setting then I 
hope you will consider my upcoming tutorial session at PyCon 2014 in 
Montréal on April 10th, 2014. Visit the <a href="https://us.pycon.org/2014/schedule/presentation/54/">tutorial page</a> for more information. I hope to see you there!</p>
                <center><a href="https://us.pycon.org/2014/schedule/presentation/54/"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/pycon2014-blog-image.png"></a></center>
                
                		<h1>Categories</h1>
		<ul>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Arduino/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Arduino">Arduino</a></span> (7)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Blog/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Blog">Blog</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/C++/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/C++">C++</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Cloud/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Cloud">Cloud</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Filmmaking">Filmmaking</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Flask/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Flask">Flask</a></span> (28)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Games/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Games RSS Feed" label="Games RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Games">Games</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Gear/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Gear RSS Feed" label="Gear RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Gear">Gear</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/HTML5/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="HTML5 RSS Feed" label="HTML5 RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/HTML5">HTML5</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Heroku/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Heroku">Heroku</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Javascript/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Javascript RSS Feed" label="Javascript RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Javascript">Javascript</a></span> (3)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Movie%20Reviews/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Movie%20Reviews">Movie Reviews</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Netflix/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Netflix RSS Feed" label="Netflix RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Netflix">Netflix</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Node.js/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Node.js RSS Feed" label="Node.js RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Node.js">Node.js</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Personal/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Personal">Personal</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Photography/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Photography">Photography</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Product%20Reviews/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Product%20Reviews">Product Reviews</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Programming/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Programming">Programming</a></span> (36)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Project%20Management/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Project%20Management">Project Management</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Python/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Python RSS Feed" label="Python RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Python">Python</a></span> (29)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/REST/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="REST RSS Feed" label="REST RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/REST">REST</a></span> (4)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Raspberry%20Pi/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Raspberry%20Pi">Raspberry Pi</a></span> (4)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/RhinoSteady/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="RhinoSteady RSS Feed" label="RhinoSteady RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/RhinoSteady">RhinoSteady</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Robotics/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Robotics">Robotics</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Video/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20IX_%20Pagination%20-%20miguelgrinberg.com_files/rss-small.png" title="Video RSS Feed" label="Video RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Video">Video</a></span> (2)</li>
		
		</ul>

                
            </div>
        </div>
    </div>
	<div id="footer">
        <p class="elapsed">This page was generated in 0.14 seconds.</p>
		<p>© 2013 by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster%20_at_%20miguelgrinberg%20_dot_%20com">Questions?</a></p>
	</div>
</div>
<div id="wrap">
</div>
<div style="display: none;" id="cboxOverlay"></div><div style="display: none; padding-bottom: 42px; padding-right: 42px;" class="" id="colorbox"><div id="cboxWrapper"><div><div style="float: left;" id="cboxTopLeft"></div><div style="float: left;" id="cboxTopCenter"></div><div style="float: left;" id="cboxTopRight"></div></div><div style="clear: left;"><div style="float: left;" id="cboxMiddleLeft"></div><div style="float: left;" id="cboxContent"><div style="width: 0px; height: 0px; overflow: hidden; float: left;" id="cboxLoadedContent"></div><div style="float: left;" id="cboxLoadingOverlay"></div><div style="float: left;" id="cboxLoadingGraphic"></div><div style="float: left;" id="cboxTitle"></div><div style="float: left;" id="cboxCurrent"></div><div style="float: left;" id="cboxNext"></div><div style="float: left;" id="cboxPrevious"></div><div style="float: left;" id="cboxSlideshow"></div><div style="float: left;" id="cboxClose"></div></div><div style="float: left;" id="cboxMiddleRight"></div></div><div style="clear: left;"><div style="float: left;" id="cboxBottomLeft"></div><div style="float: left;" id="cboxBottomCenter"></div><div style="float: left;" id="cboxBottomRight"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div></body></html>