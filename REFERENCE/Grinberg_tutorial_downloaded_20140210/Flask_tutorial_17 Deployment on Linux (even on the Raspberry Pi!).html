<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><script src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/widgets.js" id="twitter-wjs"></script><script id="bug.surrogate.20">FB={Event:{subscribe:function(){}},UIServer:{},XFBML:{parse:function(){}},init:function(){},__noSuchMethod__:function(){}};</script><script src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/all.js" id="facebook-jssdk"></script><script id="bug.surrogate.1">var urchinTracker=function(){},_gaq={push:function(){try {if(arguments[0][0]=='_link')window.location.href=arguments[0][1]}catch(er){}}},_gat={_createTracker:function(){}, _getTracker:function(){return{__noSuchMethod__:function(){},_link:function(o){if(o)location.href=o;},_linkByPost:function(){return true;},_getLinkerUrl:function(o){return o;},_trackEvent:function(){}}}};</script><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<title>The Flask Mega-Tutorial, Part XVII: Deployment on Linux (even on the Raspberry Pi!) - miguelgrinberg.com</title>

	<meta name="description" content="miguelgrinberg.com">
	<meta name="copyright" content="Copyright (c) 2012 Miguel Grinberg">
	<meta name="author" content="Miguel Grinberg">
    
    <meta name="keywords" content="python, programming, flask, web, tutorial, deployment, hosting, vps, server">
    
    <link rel="shortcut icon" href="http://blog.miguelgrinberg.com/static/favicon.ico">
	<link rel="alternate" type="application/rss+xml" href="http://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/prettify.css" type="text/css" rel="stylesheet">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/colorbox.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/jquery_002.js"></script>
	<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/jquery.js"></script>
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/moment.js"></script>
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/prettify.js"></script>
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/bootstrap.css" rel="stylesheet" media="screen">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/bootstrap-responsive.css" rel="stylesheet">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/style.css" rel="stylesheet" type="text/css">
    <script src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/bootstrap.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css" media="screen, print, projection">
    </style>
    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-4777284-15']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
    <script type="text/javascript">
        $(document).ready(function(){
            $(".gallery").colorbox({rel:".gallery",maxWidth:"95%",maxHeight:"95%",scalePhotos:true});
            // add prettyprint class to all <pre><code></code></pre> blocks
            var prettify = false;
            $("pre code").parent().each(function() {
                $(this).addClass('prettyprint');
                prettify = true;
            });
            prettyPrint();
        });
    </script>
<style type="text/css">.recaptchatable td img{display:block}.recaptchatable .recaptcha_r1_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') 0 -63px no-repeat;width:318px;height:9px}.recaptchatable .recaptcha_r2_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -18px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r2_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -27px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r3_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') 0 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r3_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -18px -57px no-repeat;width:300px;height:6px}.recaptchatable .recaptcha_r3_c3{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -9px 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r4_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px 0 no-repeat;width:171px;height:49px}.recaptchatable .recaptcha_r4_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -36px 0 no-repeat;width:7px;height:57px}.recaptchatable .recaptcha_r4_c4{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -214px 0 no-repeat;width:97px;height:57px}.recaptchatable .recaptcha_r7_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px -49px no-repeat;width:171px;height:8px}.recaptchatable .recaptcha_r8_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px -49px no-repeat;width:25px;height:8px}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px}#recaptcha_area,#recaptcha_table{width:318px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;padding:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;font-family:helvetica,sans-serif;font-size:8pt;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto}.recaptchatable #recaptcha_image{position:relative;margin:auto}.recaptchatable #recaptcha_image #recaptcha_challenge_image{display:block}.recaptchatable #recaptcha_image #recaptcha_ad_image{display:block;position:absolute;top:0}.recaptchatable img{border:0!important;margin:0!important;padding:0!important}.recaptchatable a,.recaptchatable a:hover{cursor:pointer;outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;width:153px!important;height:45px!important;margin-left:7px!important;margin-right:7px!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important;background:none!important;height:auto!important;width:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{width:153px!important;position:relative!important;bottom:7px!important;padding:0!important;margin:15px 0 0 0!important;font-size:10pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1!important}#recaptcha_instructions_error{color:red!important}.recaptcha_only_if_privacy{float:right;text-align:right}#recaptcha-ad-choices{position:absolute;height:15px;top:0;right:0}#recaptcha-ad-choices img{height:15px}.recaptcha-ad-choices-collapsed{width:15px;height:15px;display:block}.recaptcha-ad-choices-expanded{width:75px;height:15px;display:none}#recaptcha-ad-choices:hover .recaptcha-ad-choices-collapsed{display:none}#recaptcha-ad-choices:hover .recaptcha-ad-choices-expanded{display:block}

.recaptcha_is_showing_audio .recaptcha_only_if_image,.recaptcha_isnot_showing_audio .recaptcha_only_if_audio,.recaptcha_had_incorrect_sol .recaptcha_only_if_no_incorrect_sol,.recaptcha_nothad_incorrect_sol .recaptcha_only_if_incorrect_sol{display:none !important}</style><style>#ipifnjrpupmazxxgmyrritonqchfhdemx{border:solid 2px #fff !important;color:#fff !important;display:block !important;height:auto !important;margin:0 !important;opacity:0.9 !important;padding:7px 10px !important;position:fixed !important;visibility:visible !important;width:auto !important;z-index:2147483647 !important;-moz-border-radius:5px !important;border-radius:5px !important;-moz-box-shadow:0px 0px 20px #000 !important;box-shadow:0px 0px 20px #000 !important;}.ipifnjrpupmazxxgmyrritonqchfhdemx-blocked{color:#777 !important;display:inline !important;text-decoration:line-through !important;}#ipifnjrpupmazxxgmyrritonqchfhdemx span{background:transparent !important;}#ipifnjrpupmazxxgmyrritonqchfhdemx div{border:0 !important;margin:0 !important;padding:0 !important;width:auto !important;letter-spacing:normal !important;font:13px Arial,Helvetica !important;text-align:left !important;text-shadow:none !important;text-transform:none !important;word-spacing:normal !important;}#ipifnjrpupmazxxgmyrritonqchfhdemx a{font-weight:normal !important;background:none !important;text-decoration:underline !important;color:#fff !important;}@media print{#ipifnjrpupmazxxgmyrritonqchfhdemx{display:none !important;}}</style></head>
<body style="padding-top: 40px;">
<!-- facebook sdk -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- google plus sdk -->
<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/plusone.js"></script>
<!-- twitter sdk -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<!-- linkedin sdk -->
<script src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/in.js" type="text/javascript"></script>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="http://blog.miguelgrinberg.com/">miguelgrinberg.com</a>
            <ul class="nav">
                <li><a href="http://blog.miguelgrinberg.com/">Home</a></li>
                <li><a href="http://blog.miguelgrinberg.com/post/about-me">About Me</a></li>
                <li><a href="http://blog.miguelgrinberg.com/post/about-this-blog">About This Blog</a></li>
				
            </ul>
            <div class="nav pull-right">
                <p class="navbar-text">
                    <a type="application/rss+xml" href="http://blog.miguelgrinberg.com/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss.png" alt="RSS Feed" title="RSS Feed"></a>
                    <a href="https://www.facebook.com/miguelgrinbergblog"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/facebook.png" alt="Facebook" title="Facebook"></a>
                    <a href="https://plus.google.com/u/0/117786742456929977820"><img class="yfapaxbwxrlpkwtnwicp" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/googleplus.png" alt="Google+" title="Google+"></a>
                    <a href="http://www.linkedin.com/in/miguelgrinberg"><img class="yfapaxbwxrlpkwtnwicp" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/linkedin.png" alt="LinkedIn" title="LinkedIn"></a>
                    <a href="https://twitter.com/#%21/miguelgrinberg"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/twitter.png" alt="Twitter" title="Twitter"></a>
                </p>
            </div>
        </div>
    </div>
</div>
<div id="banner"></div>
<div class="container">
    <div class="row">
        <div class="span8">
            <div id="main">
                
                
                
                
                

<div class="post">
<p class="date">
<script type="text/javascript">
document.write(moment("2013-04-15T06:14:46Z").format("LL"));
</script>April 15 2013
</p>
<div class="social-outer">
    <div class="social">
        <div class="social-box"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi" data-via="miguelgrinberg" data-count="vertical">Tweet</a></div>
        <div class="social-box" style="padding-left: 6px;"><div style="display: block;" class="fb-like" data-href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi" data-send="false" data-layout="box_count" data-width="450" data-show-faces="false" data-font="verdana"><iframe style="width: 30px; height: 19px; border: 0px none;" id="obrefefoghkpcylhhnsfedtewksyxqlnkhd"></iframe></div></div>
        <div class="social-box"><g:plusone href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi" size="tall"></g:plusone></div>
        <div class="social-box"><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi" data-counter="top"></script></div>
    </div>
</div>
<h1 class="post-title">The Flask Mega-Tutorial, Part XVII: Deployment on Linux (even on the Raspberry Pi!)</h1>
<div class="posted">Posted by <span class="label label-important"><a href="http://blog.miguelgrinberg.com/author/Miguel%20Grinberg">Miguel Grinberg</a></span> under <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Programming">Programming</a></span>, <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Python">Python</a></span>, <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Raspberry%20Pi">Raspberry Pi</a></span>, <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Flask">Flask</a></span>. </div>
<div class="post_body"><p>This is the seventeenth article in the series in which I document my experience writing web applications in <a href="http://python.org/">Python</a> using the <a href="http://flask.pocoo.org/">Flask</a> microframework.</p>
<p>The goal of the tutorial series is to develop a decently featured 
microblogging application that demonstrating total lack of originality I
 have decided to call <code>microblog</code>.</p>
<p>Here is an index of all the articles in the series that have been published to date:</p>
<ul>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world">Part I: Hello, World!</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ii-templates">Part II: Templates</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms">Part III: Web Forms</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iv-database">Part IV: Database</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-v-user-logins">Part V: User Logins</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vi-profile-page-and-avatars">Part VI: Profile Page And Avatars</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing">Part VII: Unit Testing</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-viii-followers-contacts-and-friends">Part VIII: Followers, Contacts And Friends</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination">Part IX: Pagination</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-x-full-text-search">Part X: Full Text Search</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xi-email-support">Part XI: Email Support</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xii-facelift">Part XII: Facelift</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-dates-and-times">Part XIII: Dates and Times</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiv-i18n-and-l10n">Part XIV: I18n, L10n</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xv-ajax">Part XV: Ajax</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvi-debugging-testing-and-profiling">Part XVI: Debugging, Testing and Profiling</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi">Part XVII: Deployment on Linux (even on the Raspberry Pi!)</a> (this article)</li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud">Part XVIII: Deployment on the Heroku Cloud</a></li>
</ul>
<p>Today we are reaching a huge milestone in the life of our <code>microblog</code>
 application. We are going public with it, as we will be looking at 
different ways in which we can deploy it and make it accessible to our 
users.</p>
<p>In this article I will explore the traditional hosting options, and 
will be looking at hands on deployment on a Linux box and on the widely 
popular Raspberry Pi minicomputer. In the next article we will be 
looking at deployment on cloud services.</p>
<p>To begin we will be looking at the more traditional of all deployment
 options. We will install the application behind a web server on a 
dedicated host that we will manage.</p>
<p>But where can we find a host? These days there are many cheap server 
offers out there. The cheapest options are for a VPS (virtual private 
server), which is virtual machine that looks like a standalone and 
dedicated server to you, but is really sharing the physical hardware 
with a few others like it. You can check on <a href="http://www.lowendbox.com/">lowendbox.com</a>
 for deals if you want to get one to experiment with (note that I'm not 
affiliated with them, I do not make money if you click the link above).</p>
<p>Another easy way to obtain a host is to install a virtual machine on 
your regular PC. If you are a Windows or Mac user and would like to 
experience deploying the application to a Linux server without spending a
 dime, then this is the way to go. You can install <a href="https://www.virtualbox.org/">VirtualBox</a>
 on your system, download an ISO image for the Linux distribution of 
your choice and then create a VM on which you install this ISO image.</p>
<p>Let's talk a bit about operating system choices. I think there are four decent choices for hosting a web server:</p>
<ul>
<li>Linux</li>
<li>BSD</li>
<li>OS X</li>
<li>Windows</li>
</ul>
<p>From a technical point of view you could setup a Python based web server on any of the above, so how do we choose?</p>
<p>In my opinion the choice isn't too hard to make. For me it is 
important that we are on a platform that is open source, because the 
community at large does a much better job at keeping a platform safe and
 secure than what a single company can do on a closed source product. We
 also want to be on a platform that has a large server installation 
base, because that gives us more chances of finding solutions to our 
problems. Based on the above criteria, I consider Windows and OS X 
inferior to Linux and BSD as servers.</p>
<p>So now we are down to two options. The choice of Linux vs. BSD is an 
easy one for me: It does not matter. Both are excellent options for 
hosting a web server. Depending on the hosting provider you may have 
Linux or BSD options to choose from, so I just simply use what's 
available.</p>
<p>There are many Linux and BSD distributions out there, so how to pick 
one? This is largely a matter of preference, but if we are going to try 
to use what the majority use we can look at the distributions according 
to some of their major characteristics, and then pick a popular 
distribution in the group of choice:</p>
<ul>
<li>RPM based (RedHat, CentOS, Fedora)</li>
<li>Debian based (Debian, Ubuntu, Mint)</li>
<li>BSD based (FreeBSD, NetBSD, OpenBSD)</li>
<li>others</li>
</ul>
<p>I'm sure my simplistic grouping of distros will offend some. I'm also
 sure many will have the need to mention that Mac OS X is BSD based and 
as such should be in my list. Keep in mind that this classification is 
just my own, I don't expect everyone will agree with me.</p>
<p>As an exercise in preparing this article I tested a few Linux distros
 (I'm using a VPS that does not offer BSD choices). I tried Fedora, 
Ubuntu, Debian and CentOS. None of them was straightforward, 
unfortunately, but out of all of these, the CentOS install was the one 
with less complications, so that's the one I'm going to describe here.</p>
<p>If you have never done this you may find the setup task to be 
extremely laborious, and you would be correct if you think that. The 
thing is, once the server is setup it takes very little effort to keep 
it running.</p>
<p>Ready? Here we go!</p>
<h2>Hosting on CentOS 6</h2>
<p>I'm going to assume that we have a clean install of CentOS 6 on a 
dedicated server or VPS. A VM in your PC also works, but go ahead and do
 a standard install before starting.</p>
<h3>Client side setup</h3>
<p>We will be managing this server remotely from our own PC, so we need a
 tool that we can use to login into this system and run commands. If 
your PC runs Linux or OS X then you already have <a href="http://www.openssh.org/">OpenSSH</a> installed. If you are on Windows then there are two very decent ways to get SSH functionality:</p>
<ul>
<li><a href="http://www.cygwin.com/">Cygwin</a> (select the OpenSSH package in the installer)</li>
<li><a href="http://www.chiark.greenend.org.uk/%7Esgtatham/putty/download.html">Putty</a></li>
</ul>
<p>Cygwin is much more than SSH, it provides a Linux like environment 
inside your Windows box. Putty, on the other side, is just an SSH tool. 
Since I want to cover the most ground, the instructions below will be 
for Linux, OS X and Cygwin users. If you use Putty on Windows, then 
there is a little bit of translation required.</p>
<p>Let's begin by logging in to our shiny new CentOS 6 box. Open a 
command line prompt on your PC (a Cygwin prompt if you are on Windows) 
and run the following:</p>
<pre class="prettyprint"><code><span class="pln">$ ssh root@</span><span class="pun">&lt;</span><span class="pln">your</span><span class="pun">-</span><span class="pln">server</span><span class="pun">&gt;</span></code></pre>
<p>This is saying that you want to login to the system as user <code>root</code>, the admin of the system. You should replace <code>&lt;your-server&gt;</code> with the IP address or hostname of your server. Note the <code>$</code> is the command line prompt, you do not type that.</p>
<p>You will be asked to provide the password for user <code>root</code>.
 If this is a dedicated server or VPS that you purchased, you must have 
been asked about this password during the setup process. If this is your
 own VM then you chose a root password during installation.</p>
<h3>Installing software packages</h3>
<p>Now that we are logged in, we need to install all the software that 
we will be using to deploy our server, which obviously include Python 
and a web server. We will also switch from sqlite to a more robust MySQL
 database.</p>
<p>The command to install software on CentOS is called <code>yum</code>. We can install all the packages we need using a single command:</p>
<pre class="prettyprint"><code><span class="pln">$ yum install python python</span><span class="pun">-</span><span class="pln">devel httpd httpd</span><span class="pun">-</span><span class="pln">devel mysql</span><span class="pun">-</span><span class="pln">server mysql</span><span class="pun">-</span><span class="pln">devel git gcc sudo</span></code></pre>
<p>Some of these could be already installed, but it doesn't hurt to be safe and request all the packages we need, <code>yum</code> will only install what's missing.</p>
<p>The packages we just installed are:</p>
<ul>
<li><code>python</code> and <code>python-devel</code>: the Python interpreter and its  development package</li>
<li><code>httpd</code> and <code>httpd-devel</code>: The Apache web server and its development package</li>
<li><code>mysql-server</code> and <code>mysql-devel</code>: The MySQL database server and its development package</li>
<li><code>git</code>: source code version control system (we will use it to download and update the application)</li>
<li><code>gcc</code>: the C/C++ compiler (needed to compile Python extensions)</li>
<li><code>sudo</code>: a tool that helps users run commands as other users.</li>
</ul>
<h3>Creating a user account to host the application</h3>
<p>We will now setup a user account on which we will host our application. In case the reasons aren't clear, the <code>root</code>
 account has the maximum privileges, so we could easily delete or 
destroy important parts of the system by mistake. If we work inside a 
restricted account then all the important parts of the system will be 
out of reach so we are protected against mistakes. A second, maybe more 
important reason to not use the root account is that if a hacker gets 
hold of this account he will own our server. We want to hide the root 
account as much as possible, I like to disable root account logins 
completely on production servers.</p>
<p>We will call this new account <code>apps</code>, assuming we could 
host several applications inside it. Since the applications will be run 
by the web server account, we will make the group of our <code>apps</code>
 account the group of the web server account (which was created for us 
when Apache was installed), so that the web server has permission to 
read and write on these files. If you are not familiar with Unix user 
permissions, then an introduction is available over at <a href="http://en.wikipedia.org/wiki/Filesystem_permissions#Traditional_Unix_permissions">this Wikipedia page</a>.</p>
<p>The command to create the <code>apps</code> account on CentOS is:</p>
<pre class="prettyprint"><code><span class="pln">$ adduser </span><span class="pun">-</span><span class="pln">g apache apps</span></code></pre>
<p>The <code>-g</code> option makes the primary group of this account the <code>apache</code> group, which on CentOS is the group of the <code>apache</code> user account. As part of the account setup you will have to enter a password for this account.</p>
<p>The <code>adduser</code> command will create a home directory for the new account, at <code>/home/apps</code>. Unfortunately, when we go check the permissions of this directory we find it to only be accessible to the owner:</p>
<pre class="prettyprint"><code><span class="pln">$ ls </span><span class="pun">/</span><span class="pln">home </span><span class="pun">-</span><span class="pln">l
total </span><span class="lit">7</span><span class="pln">
drwx</span><span class="pun">------</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> apps  apache </span><span class="lit">4096</span><span class="pln"> </span><span class="typ">Apr</span><span class="pln">  </span><span class="lit">7</span><span class="pln"> </span><span class="lit">11</span><span class="pun">:</span><span class="lit">46</span><span class="pln"> apps</span></code></pre>
<p>We decided we want the <code>apache</code> group users to be able to freely work on the files on this account, so we have to give the group enough permissions:</p>
<pre class="prettyprint"><code><span class="pln">$ chmod </span><span class="lit">775</span><span class="pln"> </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span></code></pre>
<p>Consult the documentation for the <code>chmod</code> tool for detailed information. The <code>775</code>
 permisions will allow the owner and the group full access, and will 
also give others permission to read and execute, but not write to this 
directory.</p>
<h3>Password-less logins</h3>
<p>The next step is to be able to login to this account from our PC 
without using a password. The SSH tool supports another type of 
authentication, called <a href="http://en.wikipedia.org/wiki/Public-key_cryptography">public key</a>. If you are on a non-Windows OS it is very likely that you already have keys installed on your system. </p>
<p>Now open a terminal window on your own PC (Cygwin's bash shell for 
Windows users). To check if you have keys installed run the following 
command:</p>
<pre class="prettyprint"><code><span class="pln">$ ls </span><span class="pun">~/.</span><span class="pln">ssh
id_rsa  id_rsa</span><span class="pun">.</span><span class="pln">pub</span></code></pre>
<p>If the directory listing shows files named <code>id_rsa</code> and <code>id_rsa.pub</code> like above then you are good to go. If you don't have these files then you have to run the following command:</p>
<pre class="prettyprint"><code><span class="pln">$ keygen </span><span class="pun">-</span><span class="pln">t rsa</span></code></pre>
<p>This application will prompt you to enter a few things, for which I 
recommend you accept the defaults by pressing Enter on all the prompts. 
If you know what you are doing and want to do otherwise, you are 
certainly welcome to.</p>
<p>After this command runs you should have the two files listed above. The file <code>id_rsa.pub</code> is your public key, the data in this file can be shared with others without creating a security risk. The <code>id_rsa</code> file is your private key, so you should never share the contents of this file with anyone.</p>
<p>We will now add our public key to our server, so that it knows who we
 are. Still on our local PC we start by printing the public key file:</p>
<pre class="prettyprint"><code><span class="pln">$ cat </span><span class="pun">~</span><span class="str">/.ssh/</span><span class="pln">id_rsa</span><span class="pun">.</span><span class="pln">pub
ssh</span><span class="pun">-</span><span class="pln">rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCjwaK4JVuY6PZAr8HocCIOszrLIzzCjO0Xlt9zkFNKvVpP1B92u3JvwwiagqR</span><span class="pun">+</span><span class="pln">k0kHih2SmYnycmXjAcE60tvu</span><span class="pun">+</span><span class="pln">sIDA</span><span class="pun">/</span><span class="lit">7tEJZh4kO4nUYM5PJ17E</span><span class="pun">+</span><span class="pln">qTqUleBXQM74eITydq</span><span class="pun">/</span><span class="typ">USkOqc5p</span><span class="pun">++</span><span class="pln">qUUgA60gUUuNum3igbZiNi71zK4m8g</span><span class="pun">/</span><span class="typ">IDywWYk</span><span class="pun">+</span><span class="lit">5vzNt2i7Sm8NEuauy</span><span class="pun">/</span><span class="pln">xWgnWhCBXZ</span><span class="pun">/</span><span class="pln">tXfkgWgC</span><span class="pun">/</span><span class="lit">4HzpmsfO</span><span class="pun">+</span><span class="pln">nniNh8VgTZp8Q</span><span class="pun">+</span><span class="pln">y</span><span class="pun">+</span><span class="lit">4psSE</span><span class="pun">+</span><span class="pln">p14qUg7KdDbf0Wo</span><span class="pun">/</span><span class="pln">D35wDkMvto96bIT8RF0np9dTkFj8TgNW8inP</span><span class="pun">+</span><span class="lit">6MC</span><span class="pun">+</span><span class="lit">4vCd8F</span><span class="pun">/</span><span class="typ">NpESCVt8hRlBVERMF8Xv4f</span><span class="pun">/</span><span class="lit">0</span><span class="pun">+</span><span class="lit">7WT</span><span class="pln"> miguel@miguelspc</span></code></pre>
<p>Now we need to copy this data to the clipboard and then switch to the CentOS system, where we will issue these commands:</p>
<pre class="prettyprint"><code><span class="pln">$ mkdir </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/.</span><span class="pln">ssh
$ echo </span><span class="pun">&lt;</span><span class="pln">paste</span><span class="pun">-</span><span class="pln">your</span><span class="pun">-</span><span class="pln">key</span><span class="pun">-</span><span class="pln">here</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="str">/home/</span><span class="pln">apps</span><span class="pun">/.</span><span class="pln">ssh</span><span class="pun">/</span><span class="pln">authorized_keys</span></code></pre>
<p>For my server and public key the following commands are necessary:</p>
<pre class="prettyprint"><code><span class="pln">$ mkdir </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/.</span><span class="pln">ssh
$ echo ssh</span><span class="pun">-</span><span class="pln">rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCjwaK4JVuY6PZAr8HocCIOszrLIzzCjO0Xlt9zkFNKvVpP1B92u3JvwwiagqR</span><span class="pun">+</span><span class="pln">k0kHih2SmYnycmXjAcE60tvu</span><span class="pun">+</span><span class="pln">sIDA</span><span class="pun">/</span><span class="lit">7tEJZh4kO4nUYM5PJ17E</span><span class="pun">+</span><span class="pln">qTqUleBXQM74eITydq</span><span class="pun">/</span><span class="typ">USkOqc5p</span><span class="pun">++</span><span class="pln">qUUgA60gUUuNum3igbZiNi71zK4m8g</span><span class="pun">/</span><span class="typ">IDywWYk</span><span class="pun">+</span><span class="lit">5vzNt2i7Sm8NEuauy</span><span class="pun">/</span><span class="pln">xWgnWhCBXZ</span><span class="pun">/</span><span class="pln">tXfkgWgC</span><span class="pun">/</span><span class="lit">4HzpmsfO</span><span class="pun">+</span><span class="pln">nniNh8VgTZp8Q</span><span class="pun">+</span><span class="pln">y</span><span class="pun">+</span><span class="lit">4psSE</span><span class="pun">+</span><span class="pln">p14qUg7KdDbf0Wo</span><span class="pun">/</span><span class="pln">D35wDkMvto96bIT8RF0np9dTkFj8TgNW8inP</span><span class="pun">+</span><span class="lit">6MC</span><span class="pun">+</span><span class="lit">4vCd8F</span><span class="pun">/</span><span class="typ">NpESCVt8hRlBVERMF8Xv4f</span><span class="pun">/</span><span class="lit">0</span><span class="pun">+</span><span class="lit">7WT</span><span class="pln"> miguel@miguelspc </span><span class="pun">&gt;</span><span class="pln"> </span><span class="str">/home/</span><span class="pln">apps</span><span class="pun">/.</span><span class="pln">ssh</span><span class="pun">/</span><span class="pln">authorized_keys</span></code></pre>
<p>These commands write your public key to the file <code>authorized_keys</code> in the server. This makes your public key known to OpenSSH on the server. The remaining task is to secure the <code>.ssh</code> directory and the <code>authorized_keys</code> file inside it:</p>
<pre class="prettyprint"><code><span class="pln">$ chown </span><span class="pun">-</span><span class="pln">R apps</span><span class="pun">:</span><span class="pln">apache </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/.</span><span class="pln">ssh
$ chmod </span><span class="lit">700</span><span class="pln"> </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/.</span><span class="pln">ssh
$ chmod </span><span class="lit">600</span><span class="pln"> </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/.</span><span class="pln">ssh</span><span class="pun">/</span><span class="pln">authorized_keys</span></code></pre>
<p>These commands change the ownership of these files to the <code>apps</code> account and then make the directory and file only accessible by the new owner.</p>
<p>The password-less login should now be working. We will now logout of the <code>root</code> account of our server and then login again, but this time we will login as the <code>apps</code> user:</p>
<pre class="prettyprint"><code><span class="pln">$ ssh apps@</span><span class="pun">&lt;</span><span class="pln">your</span><span class="pun">-</span><span class="pln">server</span><span class="pun">&gt;</span></code></pre>
<p>If everything goes well you should not need to enter a password to obtain access.</p>
<h3>Installing the application</h3>
<p>We will now use <code>git</code> to download and install <code>microblog</code> into the server. If you are not familiar with <code>git</code> I recommend that you read <a href="http://ryanflorence.com/git-for-beginners/">git for beginners</a>.</p>
<p>The application must be available in a git server that can be reached
 from our web server. I will be using my own github hosted application. 
You are welcome to use it as well, or if you prefer you can also clone 
it and make one that is yours.</p>
<p>To install <code>microblog</code> in our server we just issue a <code>git clone</code> command:</p>
<pre class="prettyprint"><code><span class="pln">$ git clone git</span><span class="pun">:</span><span class="com">//github.com/miguelgrinberg/microblog.git</span><span class="pln">
$ cd microblog</span></code></pre>
<p>The latest version of the application has a few changes from how we left it in the previous article.</p>
<p>First, there are a few new files at the top level, <code>runp-sqlite.fcgi</code>, <code>runp-mysql.fcgi</code> and <code>killpython</code>. The <code>*.fcgi</code> scripts are starter scripts that are invoked by servers that use the <a href="http://www.fastcgi.com/drupal/">FastCGI</a> protocol. The <code>killpython</code> script will help us restart the application after we upgrade it. We will look at all these later.</p>
<p>Another interesting change is in our <code>config.py</code> file. Up to now we initialized our database as follows:</p>
<pre class="prettyprint"><code><span class="pln">SQLALCHEMY_DATABASE_URI </span><span class="pun">=</span><span class="pln"> </span><span class="str">'sqlite:///'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">basedir</span><span class="pun">,</span><span class="pln"> </span><span class="str">'app.db'</span><span class="pun">)</span></code></pre>
<p>Now we have this instead:</p>
<pre class="prettyprint"><code><span class="kwd">if</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">environ</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'DATABASE_URL'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln">
    SQLALCHEMY_DATABASE_URI </span><span class="pun">=</span><span class="pln"> </span><span class="str">'sqlite:///'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">basedir</span><span class="pun">,</span><span class="pln"> </span><span class="str">'app.db'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
    SQLALCHEMY_DATABASE_URI </span><span class="pun">=</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">environ</span><span class="pun">[</span><span class="str">'DATABASE_URL'</span><span class="pun">]</span></code></pre>
<p>This is a simple change that enables us to override the database the 
application will use by setting an environment variable. You will see 
how we take advantage of this change in the next section.</p>
<p>Yet another change is in the <code>setup.py</code> script that sets up the virtual environment. This script now also installs <code>mysql-python</code>,
 which is required for SQLAlchemy to connect to a MySQL database. It now
 also gets the Flask-WhooshAlchemy from my own github fork, since I 
haven't been able to connect with the original author to get my fix to 
his extension included in the main distribution.</p>
<h3>Setting up MySQL</h3>
<p>The sqlite database that we've been using all this time is great for 
simple applications, but when we get into a full blown web server that 
can serve multiple requests at a time it is a better idea to use a more 
robust database. So we will setup a MySQL database for <code>microblog</code>.</p>
<p>We have installed MySQL already, so all that is left is to create a 
database and a user that has permissions on it. To manage our database 
server we use the <code>mysql</code> tool:</p>
<pre class="prettyprint"><code><span class="pln">$ mysql </span><span class="pun">-</span><span class="pln">u root </span><span class="pun">-</span><span class="pln">p
</span><span class="typ">Enter</span><span class="pln"> password</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="pln">enter the mysql root password</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> empty </span><span class="kwd">if</span><span class="pln"> one </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">defined</span><span class="pun">)</span><span class="pln">
</span><span class="typ">Welcome</span><span class="pln"> to the </span><span class="typ">MySQL</span><span class="pln"> monitor</span><span class="pun">.</span><span class="pln">  </span><span class="typ">Commands</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="kwd">with</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> \g</span><span class="pun">.</span><span class="pln">
</span><span class="typ">Your</span><span class="pln"> </span><span class="typ">MySQL</span><span class="pln"> connection id </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">11</span><span class="pln">
</span><span class="typ">Server</span><span class="pln"> version</span><span class="pun">:</span><span class="pln"> </span><span class="lit">5.1</span><span class="pun">.</span><span class="lit">67</span><span class="pln"> </span><span class="typ">Source</span><span class="pln"> distribution

</span><span class="typ">Copyright</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span><span class="pln"> </span><span class="lit">2000</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2012</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Oracle</span><span class="pln"> </span><span class="kwd">and</span><span class="pun">/</span><span class="kwd">or</span><span class="pln"> its affiliates</span><span class="pun">.</span><span class="pln"> </span><span class="typ">All</span><span class="pln"> rights reserved</span><span class="pun">.</span><span class="pln">

</span><span class="typ">Oracle</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a registered trademark of </span><span class="typ">Oracle</span><span class="pln"> </span><span class="typ">Corporation</span><span class="pln"> </span><span class="kwd">and</span><span class="pun">/</span><span class="kwd">or</span><span class="pln"> its
affiliates</span><span class="pun">.</span><span class="pln"> </span><span class="typ">Other</span><span class="pln"> names may be trademarks of their respective
owners</span><span class="pun">.</span><span class="pln">

</span><span class="typ">Type</span><span class="pln"> </span><span class="str">'help;'</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="str">'\h'</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> help</span><span class="pun">.</span><span class="pln"> </span><span class="typ">Type</span><span class="pln"> </span><span class="str">'\c'</span><span class="pln"> to clear the current input statement</span><span class="pun">.</span><span class="pln">

mysql</span><span class="pun">&gt;</span></code></pre>
<p>And now that we are in the mysql prompt we can go ahead and create a database and a user, both named <code>apps</code>:</p>
<pre class="prettyprint"><code><span class="pln">mysql</span><span class="pun">&gt;</span><span class="pln"> create database apps character </span><span class="kwd">set</span><span class="pln"> utf8 collate utf8_bin</span><span class="pun">;</span><span class="pln">
mysql</span><span class="pun">&gt;</span><span class="pln"> create user </span><span class="str">'apps'</span><span class="pun">@</span><span class="str">'localhost'</span><span class="pln"> identified </span><span class="kwd">by</span><span class="pln"> </span><span class="str">'apps'</span><span class="pun">;</span><span class="pln">
mysql</span><span class="pun">&gt;</span><span class="pln"> grant all privileges on apps</span><span class="pun">.*</span><span class="pln"> to </span><span class="str">'apps'</span><span class="pun">@</span><span class="str">'localhost'</span><span class="pun">;</span><span class="pln">
mysql</span><span class="pun">&gt;</span><span class="pln"> flush privileges</span><span class="pun">;</span><span class="pln">
mysql</span><span class="pun">&gt;</span><span class="pln"> quit</span><span class="pun">;</span></code></pre>
<p>Note that you will need to pick a password for the <code>apps</code> MySQL user in the <code>identified by</code> section. For simplicity I have picked <code>apps</code> as password, but on a real installation a hard to guess password should be used. Do not confuse the database <code>apps</code> user with the system's <code>apps</code> user.</p>
<h3>Initializing the application</h3>
<p>Now that we have a database ready we can initialize <code>microblog</code>.</p>
<p>We start by creating the Python virtualenv:</p>
<pre class="prettyprint"><code><span class="pln">$ </span><span class="pun">./</span><span class="pln">setup</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>Then we create the database:</p>
<pre class="prettyprint"><code><span class="pln">$ DATABASE_URL</span><span class="pun">=</span><span class="pln">mysql</span><span class="pun">:</span><span class="com">//apps:apps@localhost/apps ./db_create.py</span></code></pre>
<p>Note how we set an environment variable to point to our new MySQL database instead of the sqlite default.</p>
<p>Next we compile all the messages in our translation database:</p>
<pre class="prettyprint"><code><span class="pln">$ </span><span class="pun">./</span><span class="pln">tr_compile</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>And to finalize, we enable group write access to the two folders that need to be written to by the web server:</p>
<pre class="prettyprint"><code><span class="pln">$ chmod </span><span class="pun">-</span><span class="pln">R g</span><span class="pun">+</span><span class="pln">w search</span><span class="pun">.</span><span class="pln">db tmp</span></code></pre>
<p>The <code>search.db</code> folder is used by our Whoosh full text search database. The <code>tmp</code> directory should be left open so that new files can be created there when needed.</p>
<h3>Setting up Apache</h3>
<p>The last thing to do is to configure our Apache web server.</p>
<p>We wil be using the <code>mod_fcigd</code> module to handle the FastCGI communication with our application. Many Linux distributions offer a package for <code>mod_fcgid</code>, but unfortunately CentOS is not one of them, so we will build this module from its source code.</p>
<p>Here is the list of commands that build and install the current release of <code>mod_fcgid</code>:</p>
<pre class="prettyprint"><code><span class="pln">$   wget http</span><span class="pun">:</span><span class="com">//mirror.metrocast.net/apache//httpd/mod_fcgid/mod_fcgid-2.3.7.tar.gz</span><span class="pln">
$ tar xvzf mod_fcgid</span><span class="pun">-</span><span class="lit">2.3</span><span class="pun">.</span><span class="lit">7.tar</span><span class="pun">.</span><span class="pln">gz
$ cd mod_fcgid</span><span class="pun">-</span><span class="lit">2.3</span><span class="pun">.</span><span class="lit">7</span><span class="pln">
$ APXS</span><span class="pun">=</span><span class="str">/usr/</span><span class="pln">sbin</span><span class="pun">/</span><span class="pln">apxs </span><span class="pun">./</span><span class="pln">configure</span><span class="pun">.</span><span class="pln">apxs
$ su
</span><span class="pun">(</span><span class="pln">enter root password</span><span class="pun">)</span><span class="pln">
$ make install</span></code></pre>
<p>You can consult the <code>mod_fcgid</code> documentation if you want details on the above commands.</p>
<p>With this module installed we can now configure our server. For this 
we need to edit the Apache configuration file. Linux distributions do 
not agree on a standard location and name for this file, so you will 
need to figure out where this file is. On CentOS, the config file is 
located at <code>/etc/httpd/conf/httpd.conf</code>.</p>
<p>The changes that we need to make are simply to define our server. At 
the bottom of the configuration file we add the following (from the root
 account, since this file is not writable to regular users):</p>
<pre class="prettyprint"><code><span class="typ">FcgidIPCDir</span><span class="pln"> </span><span class="pun">/</span><span class="pln">tmp
</span><span class="typ">AddHandler</span><span class="pln"> fcgid</span><span class="pun">-</span><span class="pln">script </span><span class="pun">.</span><span class="pln">fcgi
</span><span class="pun">&lt;</span><span class="typ">VirtualHost</span><span class="pln"> </span><span class="pun">*:</span><span class="lit">80</span><span class="pun">&gt;</span><span class="pln">
    </span><span class="typ">DocumentRoot</span><span class="pln"> </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/</span><span class="pln">microblog</span><span class="pun">/</span><span class="pln">app</span><span class="pun">/</span><span class="kwd">static</span><span class="pln">
    </span><span class="typ">Alias</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">static</span><span class="pln"> </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/</span><span class="pln">microblog</span><span class="pun">/</span><span class="pln">app</span><span class="pun">/</span><span class="kwd">static</span><span class="pln">
    </span><span class="typ">ScriptAlias</span><span class="pln"> </span><span class="str">/ /</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/</span><span class="pln">microblog</span><span class="pun">/</span><span class="pln">runp</span><span class="pun">-</span><span class="pln">mysql</span><span class="pun">.</span><span class="pln">fcgi</span><span class="pun">/</span><span class="pln">
</span><span class="pun">&lt;/</span><span class="typ">VirtualHost</span><span class="pun">&gt;</span></code></pre>
<p>The <code>FcgidIPCDir</code> sets the directory where the file 
sockets will be created. I've found that on CentOS this was going by 
default to a directory where the <code>apache</code> user did not have write permissions, so I'm putting all these files on <code>/tmp</code> instead.</p>
<p>Next we use <code>AddHandler</code> to tell apache that any files that have a <code>.fcgi</code> extension should be treated as FastCGI files and routed through the <code>mod_fcgid</code> module that we just installed. Remember the new <code>runp-mysql.fcgi</code> file that we have in our root folder? This file uses the <code>flup</code> Python module as an adapter so that our application can speak the FastCGI protocol. Let's have a quick look at this file:</p>
<pre class="prettyprint"><code><span class="com">#!flask/bin/python</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> os
os</span><span class="pun">.</span><span class="pln">environ</span><span class="pun">[</span><span class="str">'DATABASE_URL'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'mysql://apps:apps@localhost/apps'</span><span class="pln">

</span><span class="kwd">from</span><span class="pln"> flup</span><span class="pun">.</span><span class="pln">server</span><span class="pun">.</span><span class="pln">fcgi </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">WSGIServer</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> app </span><span class="kwd">import</span><span class="pln"> app

</span><span class="kwd">if</span><span class="pln"> __name__ </span><span class="pun">==</span><span class="pln"> </span><span class="str">'__main__'</span><span class="pun">:</span><span class="pln">
    </span><span class="typ">WSGIServer</span><span class="pun">(</span><span class="pln">app</span><span class="pun">).</span><span class="pln">run</span><span class="pun">()</span></code></pre>
<p>Apache will execute this script to start our application. Note how we
 insert the MySQL database name in the environment, so that Apache can 
see it.</p>
<p>The <code>&lt;VirtualHost&gt;</code> section defines the host that will run our web server. The <code>*:80</code>
 denomination indicates that any requests that arrive at the server for 
any hostnames on port 80 will be handled by this virtual server. The 
configuration can have multiple <code>&lt;VirtualHost&gt;</code> 
sections, each defining a different server. To differentiate the servers
 you can use different IP addresses, domain or sub-domain names or 
ports.</p>
<p>The definition of our virtual host is pretty simple. The <code>DocumentRoot</code>
 statement tells Apache where to look for static files. Any requests for
 files will be served our of this folder, so for example, when browsers 
ask for a <code>/favicon.ico</code> file to show the little icon next to
 the URL Apache will try to find it here. Unfortunately all the static 
files that we use in our application have a <code>/static</code> prefix, so to prevent Apache from looking for another <code>static</code> folder we use the <code>Alias</code> statement, which just says that anything that starts with <code>/static</code> should go directly to our folder. Finally, the <code>ScriptAlias</code> statement tells Apache that when a request that starts with <code>/</code>
 arrives  (basically all requests that are not for static files) then 
use the script indicated as second argument to handle it, and that is 
our <code>.fcgi</code> script.</p>
<p>The Apache config file supports many more options that I will not 
mention here. I recommend that you review the Apache documentation to 
decide what options make sense for your server.</p>
<p>To activate the changes we made we need to restart the apache server, again from the root account:</p>
<pre class="prettyprint"><code><span class="pln">$ service httpd restart</span></code></pre>
<p>And now from the browser on your PC you should be able to access microblog at the address <code>http://&lt;your-server&gt;</code>.</p>
<h3>Installing application updates</h3>
<p>The last remaining thing we are going to look at for this server is how to roll out an update of the application.</p>
<p>Let's assume we have deployed the application and it has been running
 happily for a while on our server. Now it's time to push an update, 
which could fix some bugs we found, or just add features.</p>
<p>We will use <code>git</code> and our own tools for this. If we login to the web server using the <code>apps</code> account we can upgrade to the latest release from the git repository by running:</p>
<pre class="prettyprint"><code><span class="pln">$ cd microblog
$ git pull
$ DATABASE_URL</span><span class="pun">=</span><span class="pln">mysql</span><span class="pun">:</span><span class="com">//apps:apps@localhost/apps ./db_upgrade.py</span><span class="pln">
$ </span><span class="pun">./</span><span class="pln">tr_compile</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>The <code>git pull</code> operation downloads any new or updated 
files from our git server. We then upgrade our database and recompile 
our translation files, in case any of those need updating. That's it!</p>
<p>Once we have the updates in place we need to tell apache to restart 
the FastCGI processes, and this gets a bit tricky, because we are logged
 in as user <code>apps</code>, an unprivileged account, while the FastCGI processes are owned by the <code>apache</code> user.</p>
<p>For this we are going to use <code>sudo</code>. The <code>sudo</code> tool allows users to selectively run applications as other users. We don't really want to give our <code>apps</code>
 account a lot of power, we will limit it to just be able to send kill 
signals to the FastCGI processes started by the apache user.</p>
<p>The <code>killpython</code> script that we have in the <code>microblog</code> directory does this work:</p>
<pre class="prettyprint"><code><span class="pln">killall </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">apps</span><span class="pun">/</span><span class="pln">microblog</span><span class="pun">/</span><span class="pln">flask</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">python</span></code></pre>
<p>The problem is, if we run this under the <code>apps</code> account we won't have permission to kill the processes owned by the <code>apache</code> user. To enable <code>apps</code> to kill these process we have to make a small change in file <code>/etc/sudoers</code>:</p>
<pre class="prettyprint"><code><span class="pln">apps    ALL</span><span class="pun">=(</span><span class="pln">apache</span><span class="pun">)</span><span class="pln"> NOPASSWD</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">apps</span><span class="pun">/</span><span class="pln">microblog</span><span class="pun">/</span><span class="pln">killpython
</span><span class="typ">Defaults</span><span class="pun">:</span><span class="pln"> apps    </span><span class="pun">!</span><span class="pln">requiretty</span></code></pre>
<p>Note you will need to make this change as user <code>root</code>, since <code>/etc/sudoers</code> is a system file.</p>
<p>The first cryptic command gives the <code>apps</code> user permission to run the <code>killpython</code> command as user <code>apache</code> without having to provide a password. The second line allows <code>sudo</code> commands for user <code>apps</code> to be issued from a script in addition to doing it from an interactive console. You can read the man page for <code>sudoers</code> for detailed information on the syntax of <code>sudo</code> configuration file.</p>
<p>Now when logged in as <code>apps</code> we can kill the python jobs as follows:</p>
<pre class="prettyprint"><code><span class="pln">$ sudo </span><span class="pun">-</span><span class="pln">u apache </span><span class="pun">./</span><span class="pln">killpython</span></code></pre>
<p>If the FastCGI processes are killed Apache will restart them the next time a request comes for <code>microblog</code>.</p>
<p>To make upgrading our server a bit more simple we can write a client 
side script that upgrades and restarts all together. The script would 
run the following:</p>
<pre class="prettyprint"><code><span class="pln">ssh apps@</span><span class="pun">&lt;</span><span class="pln">your</span><span class="pun">-</span><span class="pln">server</span><span class="pun">&gt;</span><span class="pln"> </span><span class="str">"cd microblog;git pull;sudo -u apache ./killpython;DATABASE_URL=mysql://apps:apps@localhost/apps ./db_upgrade.py;./tr_compile.py"</span></code></pre>
<p>If you store the above line in a script then you can roll out an application upgrade with a single command!</p>
<h3>What's left to do</h3>
<p>I will not discuss a few more mundane operations that are recommended
 to make a server that is open to the hostile internet world more 
secure. Things such as:</p>
<ul>
<li>Not allowing <code>root</code> remote logins</li>
<li>Disabling any services that are not used, like FTP, CIFS, etc.</li>
<li>Setting up a firewall</li>
<li>Keep the server up to date on security fixes.</li>
<li>Etc.</li>
</ul>
<p>I will leave these as an exercise to the interested reader, since they are largely unrelated to this tutorial.</p>
<h2>Hosting on the Raspberry Pi</h2>
<p>The <a href="http://www.raspberrypi.org/">Raspberry Pi</a> is a 
revolutionary little Linux computer that costs $35. It has very low 
power consumption so it is the perfect device to host a home based web 
application that can be online 24/7 without tying up a full blown 
computer.</p>
<p>There are several Linux distributions that run on the Raspberry Pi. We'll set up our application on <a href="http://www.raspbian.org/">Raspbian</a>, the official distribution.</p>
<p>As a side benefit, note that Raspbian is a derivative of Debian, so 
the instructions below will apply with little or no modification for 
Debian/Ubuntu based servers.</p>
<p>We will now follow the same steps we followed for CentOS to get the RPi server setup.</p>
<h3>Client side setup</h3>
<p>A Raspberry Pi is a pretty decent computer to work in. You can 
connect an HDMI monitor, keyboard and mouse and work directly on it to 
configure our web server. Also like we did for CentOS or actually any 
other Linux distribution you can have the Raspberry Pi just connected to
 the network and then access it remotely from a PC over <code>ssh</code>. See the client side setup section above for CentOS for instructions on how to setup a client PC with <code>ssh</code>.</p>
<p>Note that I will not cover how to install and setup the Raspberry Pi 
here, there are plenty of articles elsewhere for that. I will assume the
 Raspberry Pi is already running and connected to the network.</p>
<h3>Installing software packages</h3>
<p>Since the Pi is a limited power machine we will not do a full blown 
Apache/MySQL installation like we did for CentOS. Instead, we will take a
 lightweight approach. For web server we will use <a href="http://www.lighttpd.net/">Lighttpd</a>
 (pronounced "Lighty"), a small web server with a very good and 
efficient FastCGI implementation. For our database we will stay with 
sqlite.</p>
<p>With CentOS we used <code>yum</code> to install packages. In Debian derivatives the package manager is called <code>apt-get</code>:</p>
<pre class="prettyprint"><code><span class="pln">$ sudo apt</span><span class="pun">-</span><span class="kwd">get</span><span class="pln"> update
$ sudo apt</span><span class="pun">-</span><span class="kwd">get</span><span class="pln"> upgrade
$ sudo apt</span><span class="pun">-</span><span class="kwd">get</span><span class="pln"> install python python</span><span class="pun">-</span><span class="pln">dev lighttpd git</span></code></pre>
<p>The <code>update</code> line downloads an updated package list to your Pi. The <code>upgrade</code>
 line upgrades all installed packages to their latest versions.  It is 
recommended that you issue these two commands regularly, to keep your 
Raspberry Pi's software up to date. Finally the <code>install</code> statement installs the packages that we need for our task.</p>
<h3>Creating a user account to host the application</h3>
<p>We said that we will assume our Raspberry Pi server will be in a 
trusted network. Since security is not a major concern we will not 
bother creating a dedicated account and instead will install the app 
directly on the default <code>pi</code> account.</p>
<p>If your Raspberry Pi will be connected to the internet then you 
should follow the approach we used for CentOS and make a different 
account that has no privileges, as this ensure that if an intruder 
manages to access the account the damage that he or she can cause will 
be limited.</p>
<h3>Password-less logins</h3>
<p>Having a public key authentication procedure is also less important 
if we assume the application will run on a small intranet, but should 
you need such functionality the procedure is identical to what we did 
for the CentOS system.</p>
<h3>Installing the application</h3>
<p>The application installs very easily, again using <code>git</code>:</p>
<pre class="prettyprint"><code><span class="pln">$ git clone git</span><span class="pun">:</span><span class="com">//github.com/miguelgrinberg/microblog.git</span><span class="pln">
$ cd microblog</span></code></pre>
<h3>Initializing the application</h3>
<p>Since we will be using a sqlite database in this host we can go ahead and initialize <code>microblog</code> as we have done in past articles for our development server:</p>
<pre class="prettyprint"><code><span class="pln">$ </span><span class="pun">./</span><span class="pln">setup</span><span class="pun">.</span><span class="pln">py
$ </span><span class="pun">./</span><span class="pln">db_create</span><span class="pun">.</span><span class="pln">py
$ </span><span class="pun">./</span><span class="pln">tr_compile</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>Note that the <code>setup.py</code> script will try to install the MySQL support and that will fail, but this is all right since we will not use it.</p>
<p>The files were all checked out under the <code>pi</code> user 
ownership. But as we have seen for CentOS, the web server on the Pi will
 run under a different account. Since security isn't a concern for this 
server, we will take a much simpler approach:</p>
<pre class="prettyprint"><code><span class="pln">$ chmod </span><span class="pun">-</span><span class="pln">R </span><span class="lit">777</span><span class="pln"> </span><span class="pun">*</span></code></pre>
<p>The above <code>chmod</code> statement makes all the files writable 
by all users. Again, this would be a really bad thing to do on an open 
server, but for a server where you have full control it saves you from 
the trouble of dealing with user permissions.</p>
<p>I want to make it clear that the Raspberry Pi is perfectly capable of
 supporting a configuration based on user groups and user permissions 
similar to what we created above for the CentOS box. We are choosing 
this simplified setup because we will be using this server in a 
controlled environment.</p>
<h3>Setting up Lighttpd</h3>
<p>Lighttpd comes with native support for FastCGI, so we do not need to worry about installing a separate module for it.</p>
<p>All we need to do is append the definition of our website to the configuration file, which is located at <code>/etc/lighttpd/lighttpd.conf</code>:</p>
<pre class="prettyprint"><code><span class="pln">fastcgi</span><span class="pun">.</span><span class="pln">server </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="str">"/microblog"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln">
    </span><span class="pun">((</span><span class="pln">
        </span><span class="str">"socket"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">"/tmp/microblog-fcgi.sock"</span><span class="pun">,</span><span class="pln">
        </span><span class="str">"bin-path"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">"/home/pi/microblog/runp-sqlite.fcgi"</span><span class="pun">,</span><span class="pln">
        </span><span class="str">"check-local"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">"disable"</span><span class="pun">,</span><span class="pln">
        </span><span class="str">"max-procs"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
    </span><span class="pun">))</span><span class="pln">
</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">alias</span><span class="pun">.</span><span class="pln">url </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">
    </span><span class="str">"/microblog/static/"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">"/home/pi/microblog/app/static/"</span><span class="pun">,</span><span class="pln">
</span><span class="pun">)</span></code></pre>
<p>And with this our application should be online at <code>http://aaa.bbb.ccc.ddd/microblog</code>, with <code>aaa.bbb.ccc.ddd</code> being the IP address of your Raspberry Pi.</p>
<p>But there are a few things to note in the above configuration, and 
also a couple of things that didn't initially work and required some 
changes in the application side.</p>
<p>The <code>fastcgi.server</code> statement is the one that defines the behavior of our FastCGI server, which we are exposing under the <code>/microblog</code>
 URL. The reason we are not exposing the application at the root URL is 
simple, we may want to host more than one application, so putting all 
the URLs under a <code>/microblog</code> root effectively works as a namespace.</p>
<p>Inside the FastCGI definition we provide a socket name in the <code>/tmp</code> directory and the path to our <code>runp-sqlite.fcgi</code> file, which Lighttpd will execute to start up FastCGI processes. The <code>check-local</code> option tells Lighttpd to send requests to the FastCGI server even if the request path matches a file on disk. The <code>max-procs</code>
 limits the number of FastCGI processes to 1, which for a small server 
is enough and avoids potential problems with multiple concurrent writers
 to the sqlite database.</p>
<p>The <code>alias.url</code> section provides the mapping that enables Lighttpd to server our static files. The alias maps any requests for <code>/microblog/static/...</code> to the correct location on disk where we store our static files.</p>
<p>The <code>runp-sqlite.fcgi</code> script is pretty much the same as the one we used for CentOS, but without overriding the database setting:</p>
<pre class="prettyprint"><code><span class="kwd">from</span><span class="pln"> flup</span><span class="pun">.</span><span class="pln">server</span><span class="pun">.</span><span class="pln">fcgi </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">WSGIServer</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> app </span><span class="kwd">import</span><span class="pln"> app

</span><span class="kwd">if</span><span class="pln"> __name__ </span><span class="pun">==</span><span class="pln"> </span><span class="str">'__main__'</span><span class="pun">:</span><span class="pln">
    </span><span class="typ">WSGIServer</span><span class="pun">(</span><span class="pln">app</span><span class="pun">).</span><span class="pln">run</span><span class="pun">()</span></code></pre>
<h3>Some necessary fixes</h3>
<p>Testing this setup reveals a couple of bugs in our application.</p>
<p>First, our javascript and css static files are not being served. The 
problem becomes evident after inspecting the HTML source of the login 
page. The <code>base.html</code> template references these files via hardcoded paths that begin with <code>/static</code>, but we said are putting this application inside a <code>/microblog</code> prefix. For example, see how we had the link to the CSS file:</p>
<pre class="prettyprint"><code><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/static/css/bootstrap.min.css"</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="atn">media</span><span class="pun">=</span><span class="atv">"screen"</span><span class="tag">&gt;</span></code></pre>
<p>Here we really want <code>/microblog/static/bootstrap.min.css</code>, but of course we can't add <code>/microblog</code> to the <code>base.html</code>
 file because that will break the development server that runs on our 
PC. The solution is to let Flask generate these URLs using our old 
friend <code>url_for</code>:</p>
<pre class="prettyprint"><code><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"{{ url_for('.static', filename = 'css/bootstrap.min.css') }}"</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="atn">media</span><span class="pun">=</span><span class="atv">"screen"</span><span class="tag">&gt;</span></code></pre>
<p>After updating all the js and css files as above the site serves the login page with all the auxiliary static files.</p>
<p>But trying to login reveals another problem, Right after logging in 
we get a 500 error code. Luckily  for us we have logging, so a quick 
look at <code>/home/pi/microblog/tmp/microblog.log</code> shows the following error:</p>
<pre class="prettyprint"><code><span class="typ">ProgrammingError</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="typ">ProgrammingError</span><span class="pun">)</span><span class="pln"> </span><span class="typ">SQLite</span><span class="pln"> objects created </span><span class="kwd">in</span><span class="pln"> a thread can only be used </span><span class="kwd">in</span><span class="pln"> that same thread</span><span class="pun">.</span><span class="typ">The</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> was created </span><span class="kwd">in</span><span class="pln"> thread id </span><span class="pun">-</span><span class="lit">1260325776</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> thread id </span><span class="pun">-</span><span class="lit">1243548560</span></code></pre>
<p>What is this? We are not running multiple threads ourselves but 
obviously there are multiple threads in our application. The only 
difference between our development server and this one is that we are 
now using <code>flup</code> for the FastCGI server. Looking at the code in this module we can easily find that by default <code>flup</code> runs a multithreaded web server.</p>
<p>A possible solution would be to use the single-threaded FastCGI server from <code>flup</code>
 but that could affect the performance if the server will have multiple 
concurrent users. Another, more interesting way to handle this problem 
is to enable threading in <code>sqlite</code> (which appears to be <a href="http://www.sqlite.org/threadsafe.html">fully supported</a>). Multithreading can be enabled in SQLAlchemy by setting the <code>check_same_thread</code> option to <code>False</code> in our <code>config.py</code> configuration file:</p>
<pre class="prettyprint"><code><span class="pln">SQLALCHEMY_DATABASE_URI </span><span class="pun">=</span><span class="pln"> </span><span class="str">'sqlite:///'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">basedir</span><span class="pun">,</span><span class="pln"> </span><span class="str">'app.db'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'?check_same_thread=False'</span></code></pre>
<p>With this change we are allowing multiple threads to make changes to 
the database, the sqlite library takes care of synchronizing multiple 
accesses.</p>
<p>And with these small changes we have a fully enabled web application running on our Raspberry Pi!</p>
<h3>Installing application updates</h3>
<p>To deploy application updates we can just login to the Raspberry Pi 
and issue the commands that update the source files, database and 
translation files:</p>
<pre class="prettyprint"><code><span class="pln">$ cd microblog
$ git pull
$ </span><span class="pun">./</span><span class="pln">db_upgrade</span><span class="pun">.</span><span class="pln">py
$ </span><span class="pun">./</span><span class="pln">tr_compile</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>If you setup password-less login to your Pi then of course you can 
write a script wrapper that does all this in a single command.</p>
<h2>Final words</h2>
<p>The updated application is available, as always, on my <a href="https://github.com/miguelgrinberg/microblog/tree/v0.17">github page</a>. Alternatively you can download it as a zip file below:</p>
<p>Download <a href="https://github.com/miguelgrinberg/microblog/archive/v0.17.zip">microblog 0.17</a>.</p>
<p>In the next article we will be looking at deployment on cloud 
services as an alternative to the traditional options we explored today.</p>
<p>I will see you then. Thank you!</p>
<p>Miguel</p></div>
<div class="social-mini"><table><tbody><tr>
    <td><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi" data-via="miguelgrinberg" data-count="none">Tweet</a></td>
    <td><g:plusone href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi" size="medium" witdh="100" annotation="none"></g:plusone></td>
    <td><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi"></script></td>
    <td><div style="display: block;" class="fb-like" data-href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false" data-font="verdana"><iframe style="width: 30px; height: 19px; border: 0px none;" id="xzgksmfbuuorvljhbpgxxmamwlkhkgiidymnzk"></iframe></div></td>
</tr></tbody></table></div>

<h4 style="text-align: right"><a name="comments"></a>25 comments</h4>


<div class="comment">
    <ul>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#1</span> <span class="label label-info">Laurent Rivard</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-06-20T22:14:26Z").fromNow());
                    </script>8 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">When I try to connect to the mySQL tool. I haven't set any password, but I get the error 
&lt;code&gt; 
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
&lt;/code&gt; 

Any ideas?

Thanks a lot for the tutorial, I really enjoyed it!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#2</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-06-21T01:36:58Z").fromNow());
                    </script>8 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Laurent: chances 
are the MySQL service isn't running, or it is running but its socket 
file is incorrectly set. If you google the error message you will find 
lots of ideas on how to debug this.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#3</span> <span class="label label-info">Theladdie</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-06-24T10:55:59Z").fromNow());
                    </script>8 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Can you help me. I
 have tried the setup for the raspberry pi and I ammended the 
lighttpd.conf and restarted the server but I am not able to get the 
page... Just 404 not found.

I got the microblog from git and ran setup, db_create and tr_compile

But now I am lost</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/729e26a2a2c7ff24a71958d4aa4e5f35.jpg"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#4</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-06-25T03:52:38Z").fromNow());
                    </script>8 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Theladdie: did 
you check the lighttpd logs for errors? I can't really tell you what's 
wrong, either the configuration does not point to the place where 
microblog is installed, or maybe you are using the wrong URLs, I would 
try to get lighttpd to server regular files first to make sure it is 
working.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#5</span> <span class="label label-info">Marc Vanelverdinghe</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-07-24T18:14:49Z").fromNow());
                    </script>7 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Thank you for this
 tutorial whiwh is invaluable as for me Flask is totally new.
I have a project where I want to use the Raspberry PI's Piface board 
from the internet. when including "import piface.pfio " I get an error 
that this module is not found. How do I add this module to the virtual 
environment? When starting the standard Python version importing the 
piface module is not a problem. Any ideas?
Thanks!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/729e26a2a2c7ff24a71958d4aa4e5f35.jpg"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#6</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-07-25T05:41:19Z").fromNow());
                    </script>7 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Marc: you have 
two options. You can install piface in your virtual environment along 
with Flask, or you can create the virtual environment passing 
--system-site-packages as argument to virtualenv. This option makes the 
packages installed globally also visible to the virtual environment.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#7</span> <span class="label label-info">Thai Nguyen</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-08-08T05:34:17Z").fromNow());
                    </script>6 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">really great mega 
guide Miguel and i am glad that i found your blog. i am currently at 
part 5 of your guide. do you have by any chance an example of where you 
connect to a MS SQL-Server 2008 using slqalchemy? </p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/729e26a2a2c7ff24a71958d4aa4e5f35.jpg"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#8</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-08-08T05:38:40Z").fromNow());
                    </script>6 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Thai: with SQLAlchemy it does not really matter which database you use, all implement the same model setup and operations.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/f7d6dbe9db22232d13b501c203946bf4.png"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#9</span> <span class="label label-info">Thai Nguyen</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-08-09T02:18:21Z").fromNow());
                    </script>6 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">you are absolutely
 right with regards to the db conn. setup. it was more straight forward 
then anticipated. again thank you for writing up this very helpful 
guide!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#10</span> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/post/www.maxmath.nl">Rob Juffermans</a></span> said
                    <script type="text/javascript">
                    document.write(moment("2013-10-09T13:22:30Z").fromNow());
                    </script>4 months ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hi Miguel,

I think you should update setup.py with:

subprocess.call([os.path.join('flask', bin, 'pip'), 'install', 'flask-wtf&lt;0.9.0'])

Otherwise you could get:
ImportError: No module named flask.ext.wtf.TextField</p>
                </div>
            </div>
        </li>
        
    </ul>
    <!--
    <table width="100%">
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/cd6bc9bc458494d9fa8b77f9dbecb55b?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#1</span> <span class="label label-info">Laurent Rivard</span> said
                <script type="text/javascript">
                document.write(moment("2013-06-20T22:14:26Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">When I try to connect to the mySQL tool. I haven&#39;t set any password, but I get the error 
&lt;code&gt; 
ERROR 2002 (HY000): Can&#39;t connect to local MySQL server through socket &#39;/var/lib/mysql/mysql.sock&#39; (2)
&lt;/code&gt; 

Any ideas?

Thanks a lot for the tutorial, I really enjoyed it!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#2</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2013-06-21T01:36:58Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Laurent: chances are the MySQL service isn&#39;t running, or it is running but its socket file is incorrectly set. If you google the error message you will find lots of ideas on how to debug this.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/db530b099572fc86872f6e0bfa3c64e2?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#3</span> <span class="label label-info">Theladdie</span> said
                <script type="text/javascript">
                document.write(moment("2013-06-24T10:55:59Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Can you help me. I have tried the setup for the raspberry pi and I ammended the lighttpd.conf and restarted the server but I am not able to get the page... Just 404 not found.

I got the microblog from git and ran setup, db_create and tr_compile

But now I am lostaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#4</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2013-06-25T03:52:38Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Theladdie: did you check the lighttpd logs for errors? I can&#39;t really tell you what&#39;s wrong, either the configuration does not point to the place where microblog is installed, or maybe you are using the wrong URLs, I would try to get lighttpd to server regular files first to make sure it is working.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/1d31e478e592727f19ba1247eb5d10f1?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#5</span> <span class="label label-info">Marc Vanelverdinghe</span> said
                <script type="text/javascript">
                document.write(moment("2013-07-24T18:14:49Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Thank you for this tutorial whiwh is invaluable as for me Flask is totally new.
I have a project where I want to use the Raspberry PI&#39;s Piface board from the internet. when including &#34;import piface.pfio &#34; I get an error that this module is not found. How do I add this module to the virtual environment? When starting the standard Python version importing the piface module is not a problem. Any ideas?
Thanks!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#6</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2013-07-25T05:41:19Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Marc: you have two options. You can install piface in your virtual environment along with Flask, or you can create the virtual environment passing --system-site-packages as argument to virtualenv. This option makes the packages installed globally also visible to the virtual environment.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/f7d6dbe9db22232d13b501c203946bf4?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#7</span> <span class="label label-info">Thai Nguyen</span> said
                <script type="text/javascript">
                document.write(moment("2013-08-08T05:34:17Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">really great mega guide Miguel and i am glad that i found your blog. i am currently at part 5 of your guide. do you have by any chance an example of where you connect to a MS SQL-Server 2008 using slqalchemy? aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#8</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2013-08-08T05:38:40Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Thai: with SQLAlchemy it does not really matter which database you use, all implement the same model setup and operations.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/f7d6dbe9db22232d13b501c203946bf4?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#9</span> <span class="label label-info">Thai Nguyen</span> said
                <script type="text/javascript">
                document.write(moment("2013-08-09T02:18:21Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">you are absolutely right with regards to the db conn. setup. it was more straight forward then anticipated. again thank you for writing up this very helpful guide!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/5a498023963aae01fe9df0721e57ce69?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#10</span> <span class="label label-info"><a href="www.maxmath.nl">Rob Juffermans</a></span> said
                <script type="text/javascript">
                document.write(moment("2013-10-09T13:22:30Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Hi Miguel,

I think you should update setup.py with:

subprocess.call([os.path.join(&#39;flask&#39;, bin, &#39;pip&#39;), &#39;install&#39;, &#39;flask-wtf&lt;0.9.0&#39;])

Otherwise you could get:
ImportError: No module named flask.ext.wtf.TextFieldaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    </table>
    -->
</div>

<div class="page">
<ul class="pager">
  <li class="previous disabled">
    <a href="#">««</a>
  </li>
  <li class="previous disabled">
    <a href="#">«</a>
  </li>
  <li class="next">
    <a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi/page/0#comments">»»</a>
  </li>
  <li class="next">
    <a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi/page/2#comments">»</a>
  </li>
</ul>
</div>

<h3><a name="commentform"></a>Leave a Comment</h3>
<div class="commentform">
<form class="form-horizontal" method="post" action="#commentform">
<div style="display:none;"><input id="csrf_token" name="csrf_token" value="20140210210346##1efecaf58131aacc6dca1cc4d42d52557b904215" type="hidden"></div>

<div class="control-group">
    <label class="control-label" for="name">Name <span class="label label-important">*</span></label>
    <div class="controls"><input class="span5" id="name" name="name" type="text"></div>
</div>
<div class="control-group">
    <label class="control-label" for="url">Website</label>
    <div class="controls"><input class="span5" id="url" name="url" type="text"></div>
</div>
<div class="control-group">
    <label class="control-label" for="email">Email <span class="label label-important">*</span></label>
    <div class="controls"><input class="span5" id="email" name="email" type="text"></div>
</div>

<div class="control-group">
    <label class="control-label" for="comment">Comment <span class="label label-important">*</span></label>
    <div class="controls"><textarea class="span5" id="comment" name="comment" rows="4"></textarea><img style="cursor: pointer ! important; display: none ! important; position: absolute ! important; padding: 0px ! important; margin: 0px ! important; border: medium none ! important; width: 28px ! important; height: 14px ! important; opacity: 0.0152174 ! important; left: 664px ! important; top: 20013px ! important;" title="It's All Text!" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/gumdrop.png"></div>
</div>

<div class="control-group">
    <div class="controls">
<script type="text/javascript">var RecaptchaOptions = {"theme": "white", "custom_translations": {"incorrect_try_again": "Incorrect. Try again.", "help_btn": "Help", "cant_hear_this": "Download sound as MP3", "instructions_audio": "Type what you hear:", "instructions_visual": "Type the two words:", "refresh_btn": "Get a new challenge", "play_again": "Play sound again", "visual_challenge": "Get a visual challenge", "audio_challenge": "Get an audio challenge"}};</script>
<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/challenge.js"></script><script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/recaptcha.js"></script><div class=" recaptcha_nothad_incorrect_sol recaptcha_isnot_showing_audio" id="recaptcha_widget_div" style=""><div id="recaptcha_area"><table id="recaptcha_table" class="recaptchatable recaptcha_theme_white"> <tbody><tr> <td colspan="6" class="recaptcha_r1_c1"></td> </tr> <tr> <td class="recaptcha_r2_c1"></td> <td colspan="4" class="recaptcha_image_cell"><center><div style="width: 300px; height: 57px;" id="recaptcha_image"><img id="recaptcha_challenge_image" alt="reCAPTCHA challenge image" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/image.jpg" height="57" width="300"></div></center></td> <td class="recaptcha_r2_c2"></td> </tr> <tr> <td rowspan="6" class="recaptcha_r3_c1"></td> <td colspan="4" class="recaptcha_r3_c2"></td> <td rowspan="6" class="recaptcha_r3_c3"></td> </tr> <tr> <td rowspan="3" class="recaptcha_r4_c1" height="49"> <div class="recaptcha_input_area"> <span style="display: none;" id="recaptcha_challenge_field_holder"><input name="recaptcha_challenge_field" id="recaptcha_challenge_field" value="03AHJ_Vuux9ZnwqqAPdzCOSd0OOIBMNe6k3V2p61xtHAyNuqmavqV4t-anJ0VTHhz1vguTm24lSwZhiQENeAMMHFOuXqwv-RRp9WyQ0uhu40_pTqDiBtRJUeg6hOP2TmJnGfeCpwFo8Wk5KXVtloUO1fOB8s9E-ZcbenrACtTYQVOg9g119P7ERN4" type="hidden"></span><input autocomplete="off" name="recaptcha_response_field" id="recaptcha_response_field" autocorrect="off" autocapitalize="off" placeholder="Type the two words" type="text"> <span id="recaptcha_privacy" class="recaptcha_only_if_privacy"><a target="_blank" href="http://www.google.com/intl/en/policies/">Privacy &amp; Terms</a></span> </div> </td> <td rowspan="4" class="recaptcha_r4_c2"></td> <td><a title="Get a new challenge" id="recaptcha_reload_btn"><img alt="Get a new challenge" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/refresh.gif" id="recaptcha_reload" height="17" width="25"></a></td> <td rowspan="4" class="recaptcha_r4_c4"></td> </tr> <tr> <td><a title="Get an audio challenge" id="recaptcha_switch_audio_btn" class="recaptcha_only_if_image"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/audio.gif" id="recaptcha_switch_audio" alt="Get an audio challenge" height="16" width="25"></a><a title="Get a visual challenge" id="recaptcha_switch_img_btn" class="recaptcha_only_if_audio"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/text.gif" id="recaptcha_switch_img" alt="Get a visual challenge" height="16" width="25"></a></td> </tr> <tr> <td><a title="Help" id="recaptcha_whatsthis_btn"><img alt="Help" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/help.gif" id="recaptcha_whatsthis" height="16" width="25"></a></td> </tr> <tr> <td class="recaptcha_r7_c1"></td> <td class="recaptcha_r8_c1"></td> </tr> </tbody></table> </div></div>
<noscript>
  <div><iframe src="http://api.recaptcha.net/noscript?k=6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S" height="300" width="500"></iframe></div>
  <div><textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
  <input type="hidden" name="recaptcha_response_field" value="manual_challenge"></div>
</noscript>
</div>
</div>

<div class="control-group">
    <div class="controls"><input name="submit" class="btn btn-primary" value="Post Comment" type="submit"> <span class="help-inline">Note: all comments are screened before they are published. Thank you for your patience!</span></div>
</div>
</form>
</div>


</div>

            </div>
        </div>
        <div class="span4">
            <div id="sidebar">
                <h1>About Miguel</h1>
                <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/miguel.jpg">
                <p>Welcome to my blog!</p>
                <p>I'm a software engineer, photographer and filmmaker in Portland, Oregon, USA.</p>
                <p>You can also find me on <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a>, <a href="https://plus.google.com/u/0/117786742456929977820">Google+</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a> and <a href="https://twitter.com/#%21/miguelgrinberg">Twitter</a>.</p>
                <p>Thank you for visiting!</p>
                <h1>Flask Web Development Book</h1>
                <p>I'm currently writing a book on web development with 
Python and Flask, to be published by O'Reilly Media in 2014. The 
official site for this book is <a href="http://flaskbook.com/">http://flaskbook.com</a>.</p>
                <center><a href="http://flaskbook.com/"><img style="border: 1px solid black;" src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/flask-book-cover-tiny.png"></a></center>
                <h1>Flask Tutorial at PyCon 2014</h1>
                <p>If you want to learn Flask in a class setting then I 
hope you will consider my upcoming tutorial session at PyCon 2014 in 
Montréal on April 10th, 2014. Visit the <a href="https://us.pycon.org/2014/schedule/presentation/54/">tutorial page</a> for more information. I hope to see you there!</p>
                <center><a href="https://us.pycon.org/2014/schedule/presentation/54/"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/pycon2014-blog-image.png"></a></center>
                
                		<h1>Categories</h1>
		<ul>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Arduino/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Arduino">Arduino</a></span> (7)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Blog/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Blog">Blog</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/C++/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/C++">C++</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Cloud/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Cloud">Cloud</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Filmmaking">Filmmaking</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Flask/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Flask">Flask</a></span> (28)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Games/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Games RSS Feed" label="Games RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Games">Games</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Gear/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Gear RSS Feed" label="Gear RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Gear">Gear</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/HTML5/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="HTML5 RSS Feed" label="HTML5 RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/HTML5">HTML5</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Heroku/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Heroku">Heroku</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Javascript/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Javascript RSS Feed" label="Javascript RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Javascript">Javascript</a></span> (3)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Movie%20Reviews/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Movie%20Reviews">Movie Reviews</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Netflix/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Netflix RSS Feed" label="Netflix RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Netflix">Netflix</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Node.js/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Node.js RSS Feed" label="Node.js RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Node.js">Node.js</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Personal/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Personal">Personal</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Photography/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Photography">Photography</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Product%20Reviews/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Product%20Reviews">Product Reviews</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Programming/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Programming">Programming</a></span> (36)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Project%20Management/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Project%20Management">Project Management</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Python/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Python RSS Feed" label="Python RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Python">Python</a></span> (29)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/REST/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="REST RSS Feed" label="REST RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/REST">REST</a></span> (4)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Raspberry%20Pi/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Raspberry%20Pi">Raspberry Pi</a></span> (4)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/RhinoSteady/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="RhinoSteady RSS Feed" label="RhinoSteady RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/RhinoSteady">RhinoSteady</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Robotics/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Robotics">Robotics</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Video/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20XVII_%20Deployment%20on%20Linux%20%28even%20on%20the%20Raspberry%20Pi%21%29%20-%20miguelgrinberg.com_files/rss-small.png" title="Video RSS Feed" label="Video RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Video">Video</a></span> (2)</li>
		
		</ul>

                
            </div>
        </div>
    </div>
	<div id="footer">
        <p class="elapsed">This page was generated in 0.099 seconds.</p>
		<p>© 2013 by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster%20_at_%20miguelgrinberg%20_dot_%20com">Questions?</a></p>
	</div>
</div>
<div id="wrap">
</div>
<div style="display: none;" id="cboxOverlay"></div><div style="display: none; padding-bottom: 42px; padding-right: 42px;" class="" id="colorbox"><div id="cboxWrapper"><div><div style="float: left;" id="cboxTopLeft"></div><div style="float: left;" id="cboxTopCenter"></div><div style="float: left;" id="cboxTopRight"></div></div><div style="clear: left;"><div style="float: left;" id="cboxMiddleLeft"></div><div style="float: left;" id="cboxContent"><div style="width: 0px; height: 0px; overflow: hidden; float: left;" id="cboxLoadedContent"></div><div style="float: left;" id="cboxLoadingOverlay"></div><div style="float: left;" id="cboxLoadingGraphic"></div><div style="float: left;" id="cboxTitle"></div><div style="float: left;" id="cboxCurrent"></div><div style="float: left;" id="cboxNext"></div><div style="float: left;" id="cboxPrevious"></div><div style="float: left;" id="cboxSlideshow"></div><div style="float: left;" id="cboxClose"></div></div><div style="float: left;" id="cboxMiddleRight"></div></div><div style="clear: left;"><div style="float: left;" id="cboxBottomLeft"></div><div style="float: left;" id="cboxBottomCenter"></div><div style="float: left;" id="cboxBottomRight"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div></body></html>