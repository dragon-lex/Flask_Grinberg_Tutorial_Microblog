<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en"><script src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/widgets.js" id="twitter-wjs"></script><script id="bug.surrogate.20">FB={Event:{subscribe:function(){}},UIServer:{},XFBML:{parse:function(){}},init:function(){},__noSuchMethod__:function(){}};</script><script src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/all.js" id="facebook-jssdk"></script><script id="bug.surrogate.1">var urchinTracker=function(){},_gaq={push:function(){try {if(arguments[0][0]=='_link')window.location.href=arguments[0][1]}catch(er){}}},_gat={_createTracker:function(){}, _getTracker:function(){return{__noSuchMethod__:function(){},_link:function(o){if(o)location.href=o;},_linkByPost:function(){return true;},_getLinkerUrl:function(o){return o;},_trackEvent:function(){}}}};</script><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<title>The Flask Mega-Tutorial, Part VII: Unit Testing - miguelgrinberg.com</title>

	<meta name="description" content="miguelgrinberg.com">
	<meta name="copyright" content="Copyright (c) 2012 Miguel Grinberg">
	<meta name="author" content="Miguel Grinberg">
    
    <meta name="keywords" content="python, programming, flask, web, tutorial, unit, test, testing, unit testing">
    
    <link rel="shortcut icon" href="http://blog.miguelgrinberg.com/static/favicon.ico">
	<link rel="alternate" type="application/rss+xml" href="http://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/prettify.css" type="text/css" rel="stylesheet">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/colorbox.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/jquery_002.js"></script>
	<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/jquery.js"></script>
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/moment.js"></script>
    <script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/prettify.js"></script>
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/bootstrap.css" rel="stylesheet" media="screen">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/bootstrap-responsive.css" rel="stylesheet">
    <link href="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/style.css" rel="stylesheet" type="text/css">
    <script src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/bootstrap.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css" media="screen, print, projection">
    </style>
    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-4777284-15']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
    <script type="text/javascript">
        $(document).ready(function(){
            $(".gallery").colorbox({rel:".gallery",maxWidth:"95%",maxHeight:"95%",scalePhotos:true});
            // add prettyprint class to all <pre><code></code></pre> blocks
            var prettify = false;
            $("pre code").parent().each(function() {
                $(this).addClass('prettyprint');
                prettify = true;
            });
            prettyPrint();
        });
    </script>
<style type="text/css">.recaptchatable td img{display:block}.recaptchatable .recaptcha_r1_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') 0 -63px no-repeat;width:318px;height:9px}.recaptchatable .recaptcha_r2_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -18px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r2_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -27px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r3_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') 0 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r3_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -18px -57px no-repeat;width:300px;height:6px}.recaptchatable .recaptcha_r3_c3{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -9px 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r4_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px 0 no-repeat;width:171px;height:49px}.recaptchatable .recaptcha_r4_c2{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -36px 0 no-repeat;width:7px;height:57px}.recaptchatable .recaptcha_r4_c4{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -214px 0 no-repeat;width:97px;height:57px}.recaptchatable .recaptcha_r7_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px -49px no-repeat;width:171px;height:8px}.recaptchatable .recaptcha_r8_c1{background:url('http://www.google.com/recaptcha/api/img/white/sprite.png') -43px -49px no-repeat;width:25px;height:8px}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px}#recaptcha_area,#recaptcha_table{width:318px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;padding:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;font-family:helvetica,sans-serif;font-size:8pt;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto}.recaptchatable #recaptcha_image{position:relative;margin:auto}.recaptchatable #recaptcha_image #recaptcha_challenge_image{display:block}.recaptchatable #recaptcha_image #recaptcha_ad_image{display:block;position:absolute;top:0}.recaptchatable img{border:0!important;margin:0!important;padding:0!important}.recaptchatable a,.recaptchatable a:hover{cursor:pointer;outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;width:153px!important;height:45px!important;margin-left:7px!important;margin-right:7px!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important;background:none!important;height:auto!important;width:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{width:153px!important;position:relative!important;bottom:7px!important;padding:0!important;margin:15px 0 0 0!important;font-size:10pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1!important}#recaptcha_instructions_error{color:red!important}.recaptcha_only_if_privacy{float:right;text-align:right}#recaptcha-ad-choices{position:absolute;height:15px;top:0;right:0}#recaptcha-ad-choices img{height:15px}.recaptcha-ad-choices-collapsed{width:15px;height:15px;display:block}.recaptcha-ad-choices-expanded{width:75px;height:15px;display:none}#recaptcha-ad-choices:hover .recaptcha-ad-choices-collapsed{display:none}#recaptcha-ad-choices:hover .recaptcha-ad-choices-expanded{display:block}

.recaptcha_is_showing_audio .recaptcha_only_if_image,.recaptcha_isnot_showing_audio .recaptcha_only_if_audio,.recaptcha_had_incorrect_sol .recaptcha_only_if_no_incorrect_sol,.recaptcha_nothad_incorrect_sol .recaptcha_only_if_incorrect_sol{display:none !important}</style><style>#dzadgdycndroamgahbmrmzfhxghdnjak{border:solid 2px #fff !important;color:#fff !important;display:block !important;height:auto !important;margin:0 !important;opacity:0.9 !important;padding:7px 10px !important;position:fixed !important;visibility:visible !important;width:auto !important;z-index:2147483647 !important;-moz-border-radius:5px !important;border-radius:5px !important;-moz-box-shadow:0px 0px 20px #000 !important;box-shadow:0px 0px 20px #000 !important;}.dzadgdycndroamgahbmrmzfhxghdnjak-blocked{color:#777 !important;display:inline !important;text-decoration:line-through !important;}#dzadgdycndroamgahbmrmzfhxghdnjak span{background:transparent !important;}#dzadgdycndroamgahbmrmzfhxghdnjak div{border:0 !important;margin:0 !important;padding:0 !important;width:auto !important;letter-spacing:normal !important;font:13px Arial,Helvetica !important;text-align:left !important;text-shadow:none !important;text-transform:none !important;word-spacing:normal !important;}#dzadgdycndroamgahbmrmzfhxghdnjak a{font-weight:normal !important;background:none !important;text-decoration:underline !important;color:#fff !important;}@media print{#dzadgdycndroamgahbmrmzfhxghdnjak{display:none !important;}}</style></head>
<body style="padding-top: 40px;">
<!-- facebook sdk -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- google plus sdk -->
<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/plusone.js"></script>
<!-- twitter sdk -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<!-- linkedin sdk -->
<script src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/in.js" type="text/javascript"></script>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="http://blog.miguelgrinberg.com/">miguelgrinberg.com</a>
            <ul class="nav">
                <li><a href="http://blog.miguelgrinberg.com/">Home</a></li>
                <li><a href="http://blog.miguelgrinberg.com/post/about-me">About Me</a></li>
                <li><a href="http://blog.miguelgrinberg.com/post/about-this-blog">About This Blog</a></li>
				
            </ul>
            <div class="nav pull-right">
                <p class="navbar-text">
                    <a type="application/rss+xml" href="http://blog.miguelgrinberg.com/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss.png" alt="RSS Feed" title="RSS Feed"></a>
                    <a href="https://www.facebook.com/miguelgrinbergblog"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/facebook.png" alt="Facebook" title="Facebook"></a>
                    <a href="https://plus.google.com/u/0/117786742456929977820"><img class="yfapaxbwxrlpkwtnwicp" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/googleplus.png" alt="Google+" title="Google+"></a>
                    <a href="http://www.linkedin.com/in/miguelgrinberg"><img class="yfapaxbwxrlpkwtnwicp" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/linkedin.png" alt="LinkedIn" title="LinkedIn"></a>
                    <a href="https://twitter.com/#%21/miguelgrinberg"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/twitter.png" alt="Twitter" title="Twitter"></a>
                </p>
            </div>
        </div>
    </div>
</div>
<div id="banner"></div>
<div class="container">
    <div class="row">
        <div class="span8">
            <div id="main">
                
                
                
                
                

<div class="post">
<p class="date">
<script type="text/javascript">
document.write(moment("2012-08-01T06:50:31Z").format("LL"));
</script>August 1 2012
</p>
<div class="social-outer">
    <div class="social">
        <div class="social-box"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing" data-via="miguelgrinberg" data-count="vertical">Tweet</a></div>
        <div class="social-box" style="padding-left: 6px;"><div style="display: block;" class="fb-like" data-href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing" data-send="false" data-layout="box_count" data-width="450" data-show-faces="false" data-font="verdana"><iframe style="width: 30px; height: 19px; border: 0px none;" id="heguhhoxnhsaspetnecyuvbydncgbonjdluqfo"></iframe></div></div>
        <div class="social-box"><g:plusone href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing" size="tall"></g:plusone></div>
        <div class="social-box"><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing" data-counter="top"></script></div>
    </div>
</div>
<h1 class="post-title">The Flask Mega-Tutorial, Part VII: Unit Testing</h1>
<div class="posted">Posted by <span class="label label-important"><a href="http://blog.miguelgrinberg.com/author/Miguel%20Grinberg">Miguel Grinberg</a></span> under <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Programming">Programming</a></span>, <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Python">Python</a></span>, <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Flask">Flask</a></span>. </div>
<div class="post_body"><p>This is the seventh article in the series in which I document my experience writing web applications in <a href="http://python.org/">Python</a> using the <a href="http://flask.pocoo.org/">Flask</a> microframework.</p>
<p>The goal of the tutorial series is to develop a decently featured 
microblogging application that demonstrating total lack of originality I
 have decided to call <code>microblog</code>.</p>
<p>Here is an index of all the articles in the series that have been published to date:</p>
<ul>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world">Part I: Hello, World!</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ii-templates">Part II: Templates</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms">Part III: Web Forms</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iv-database">Part IV: Database</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-v-user-logins">Part V: User Logins</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vi-profile-page-and-avatars">Part VI: Profile Page And Avatars</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing">Part VII: Unit Testing</a> (this article)</li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-viii-followers-contacts-and-friends">Part VIII: Followers, Contacts And Friends</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-ix-pagination">Part IX: Pagination</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-x-full-text-search">Part X: Full Text Search</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xi-email-support">Part XI: Email Support</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xii-facelift">Part XII: Facelift</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-dates-and-times">Part XIII: Dates and Times</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiv-i18n-and-l10n">Part XIV: I18n and L10n</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xv-ajax">Part XV: Ajax</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvi-debugging-testing-and-profiling">Part XVI: Debugging, Testing and Profiling</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xvii-deployment-on-linux-even-on-the-raspberry-pi">Part XVII: Deployment on Linux (even on the Raspberry Pi!)</a></li>
<li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xviii-deployment-on-the-heroku-cloud">Part XVIII: Deployment on the Heroku Cloud</a></li>
</ul>
<h2>Recap</h2>
<p>In the previous chapters of this tutorial we were concentrating in 
adding functionality to our little application, a step at a time. By now
 we have a database enabled application that can register users, log 
them in and out and let them view and edit their profiles.</p>
<p>In this session we are not going to add any new features to our 
application. Instead, we are going to find ways to add robustness to the
 code that we have already written, and we will also create a testing 
framework that will help us prevent failures and regressions in the 
future.</p>
<h2>Let's find a bug</h2>
<p>I mentioned at the end of the last chapter that I have intentionally 
introduced a bug in the application. Let me describe what the bug is, 
then we will use it to see what happens to our application when it does 
not work as expected.</p>
<p>The problem in the application is that there is no effort to keep the
 nicknames of our users unique. The initial nickname of a user is chosen
 automatically by the application. If the OpenID provider provides a 
nickname for the user then we will just use it. If not we will use the 
username part of the email address as nickname. If we get two users with
 the same nickname then the second one will not be able to register. To 
make matters worse, in the profile edit form we let users change their 
nicknames to whatever they want, and again there is no effort to avoid 
name collisions.</p>
<p>We will address these problems later, after we analyze how the application behaves when an error occurs.</p>
<h2>Flask debugging support</h2>
<p>So let's see what happens when we trigger our bug.</p>
<p>Let's start by creating a brand new database. On Linux:</p>
<pre class="prettyprint"><code><span class="pln">rm app</span><span class="pun">.</span><span class="pln">db
</span><span class="pun">./</span><span class="pln">db_create</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>or on Windows:</p>
<pre class="prettyprint"><code><span class="kwd">del</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">db
flask</span><span class="pun">/</span><span class="typ">Scripts</span><span class="pun">/</span><span class="pln">python db_create</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>You need two OpenID accounts to reproduce this bug, ideally from 
different providers, so that their cookies don't make this more 
complicated. Follow these steps to create a nickname collision:</p>
<ul>
<li>login with your first account</li>
<li>go to the edit profile page and change the nickname to 'dup'</li>
<li>logout</li>
<li>login with your second account</li>
<li>go to the edit profile page and change the nickname to 'dup'</li>
</ul>
<p>Oops! We've got an exception from sqlalchemy. The text of the error reads:</p>
<pre class="prettyprint"><code><span class="pln">sqlalchemy</span><span class="pun">.</span><span class="pln">exc</span><span class="pun">.</span><span class="typ">IntegrityError</span><span class="pln">
</span><span class="typ">IntegrityError</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IntegrityError</span><span class="pun">)</span><span class="pln"> column nickname </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> unique u</span><span class="str">'UPDATE user SET nickname=?, about_me=? WHERE user.id = ?'</span><span class="pln"> </span><span class="pun">(</span><span class="pln">u</span><span class="str">'dup'</span><span class="pun">,</span><span class="pln"> u</span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span></code></pre>
<p>What follows after the error is a <a href="http://en.wikipedia.org/wiki/Stack_trace">stack trace</a>
 of the error, and actually it is a pretty nice one, where you can go to
 any frame and inspect source code or even evaluate expressions right in
 the browser.</p>
<p>The error is pretty clear, we tried to insert a duplicated nickname in the database. The database model had a <code>unique</code> constrain on the <code>nickname</code> field, so this is an invalid operation.</p>
<p>In addition to the actual error, we have a secondary problem in our 
hands. If a user inadvertently causes an error in our application (this 
one or any other that causes an exception) it will be him or her that 
gets the error with the revealing error message and the stack trace, not
 us. While this is a fantastic feature while we are developing, it is 
something we definitely do not want our users to ever see.</p>
<p>All this time we have been running our application in <em>debug mode</em>. The debug mode is enabled when the application starts, by passing a <code>debug = True</code> argument to the <code>run</code> method. This is how we coded our <code>run.py</code> start-up script. </p>
<p>When we are developing the application this is convenient, but we 
need to make sure it is turned off when we run our application in <em>production mode</em>. Let's just create another starter script that runs with debugging disabled (file <code>runp.py</code>):</p>
<pre class="prettyprint"><code><span class="com">#!flask/bin/python</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> app </span><span class="kwd">import</span><span class="pln"> app
app</span><span class="pun">.</span><span class="pln">run</span><span class="pun">(</span><span class="pln">debug </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">False</span><span class="pun">)</span></code></pre>
<p>Now restart the application with:</p>
<pre class="prettyprint"><code><span class="pun">./</span><span class="pln">runp</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>And now try again to rename the nickname on the second account to 'dup'.</p>
<p>This time we did not get an error. Instead, we've got an HTTP error 
code 500, which is Internal Server Error. Not a great looking error, but
 at least we are not exposing any details of our application to 
strangers. The error 500 page is generated by Flask when debugging is 
off and an unhandled exception occurs.</p>
<p>While this is better, we are now having two new issues. First a 
cosmetic one: the default error 500 page is ugly. The second problem is 
much more important. With things as they are we would never know when 
and if a user experiences a failure in our application because now 
application failures are silently dismissed. Luckily there are easy ways
 to address both problems.</p>
<h2>Custom HTTP error handlers</h2>
<p>Flask provides a mechanism for an application to install its own 
error pages. As an example, let's define custom error pages for the HTTP
 errors 404 and 500, the two most common ones. Defining pages for other 
errors works in the same way.</p>
<p>To declare a custom error handler the <code>errorhandler</code> decorator is used (file <code>app/views.py</code>):</p>
<pre class="prettyprint"><code><span class="lit">@app</span><span class="pun">.</span><span class="pln">errorhandler</span><span class="pun">(</span><span class="lit">404</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> internal_error</span><span class="pun">(</span><span class="pln">error</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> render_template</span><span class="pun">(</span><span class="str">'404.html'</span><span class="pun">),</span><span class="pln"> </span><span class="lit">404</span><span class="pln">

</span><span class="lit">@app</span><span class="pun">.</span><span class="pln">errorhandler</span><span class="pun">(</span><span class="lit">500</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> internal_error</span><span class="pun">(</span><span class="pln">error</span><span class="pun">):</span><span class="pln">
    db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">rollback</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> render_template</span><span class="pun">(</span><span class="str">'500.html'</span><span class="pun">),</span><span class="pln"> </span><span class="lit">500</span></code></pre>
<p>Not much to talk about for these, as they are almost self-explanatory. The only interesting bit is the <code>rollback</code>
 statement in the error 500 handler. This is necessary because this 
function will be called as a result of an exception. If the exception 
was triggered by a database error then the database session is going to 
arrive in an invalid state, so we have to roll it back in case a working
 session is needed for the rendering of the template for the 500 error.</p>
<p>Here is the template for the 404 error:</p>
<pre class="prettyprint"><code><span class="com">&lt;!-- extend base layout --&gt;</span><span class="pln">
{% extends "base.html" %}

{% block content %}
</span><span class="tag">&lt;h1&gt;</span><span class="pln">File Not Found</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
</span><span class="tag">&lt;p&gt;&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"{{url_for('index')}}"</span><span class="tag">&gt;</span><span class="pln">Back</span><span class="tag">&lt;/a&gt;&lt;/p&gt;</span><span class="pln">
{% endblock %}</span></code></pre>
<p>And here is the one for the 500 error:</p>
<pre class="prettyprint"><code><span class="com">&lt;!-- extend base layout --&gt;</span><span class="pln">
{% extends "base.html" %}

{% block content %}
</span><span class="tag">&lt;h1&gt;</span><span class="pln">An unexpected error has occurred</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
</span><span class="tag">&lt;p&gt;</span><span class="pln">The administrator has been notified. Sorry for the inconvenience!</span><span class="tag">&lt;/p&gt;</span><span class="pln">
</span><span class="tag">&lt;p&gt;&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"{{url_for('index')}}"</span><span class="tag">&gt;</span><span class="pln">Back</span><span class="tag">&lt;/a&gt;&lt;/p&gt;</span><span class="pln">
{% endblock %}</span></code></pre>
<p>Note that in both cases we continue to use our <code>base.html</code> layout, so that the error page has the look and feel of the application.</p>
<h2>Sending errors via email</h2>
<p>To address our second problem we are going to configure two reporting
 mechanisms for application errors. The first of them is to have the 
application send us an email each time an error occurs. </p>
<p>Before we get into this let's configure an email server and an administrator list in our application (file <code>config.py</code>):</p>
<pre class="prettyprint"><code><span class="com"># mail server settings</span><span class="pln">
MAIL_SERVER </span><span class="pun">=</span><span class="pln"> </span><span class="str">'localhost'</span><span class="pln">
MAIL_PORT </span><span class="pun">=</span><span class="pln"> </span><span class="lit">25</span><span class="pln">
MAIL_USERNAME </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">None</span><span class="pln">
MAIL_PASSWORD </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">None</span><span class="pln">

</span><span class="com"># administrator list</span><span class="pln">
ADMINS </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'you@example.com'</span><span class="pun">]</span></code></pre>
<p>Of course it will be up to you to change these to what makes sense.</p>
<p>Flask uses the regular Python <code>logging</code> module, so setting up an email when there is an exception is pretty easy (file <code>app/__init__.py</code>):</p>
<pre class="prettyprint"><code><span class="kwd">from</span><span class="pln"> config </span><span class="kwd">import</span><span class="pln"> basedir</span><span class="pun">,</span><span class="pln"> ADMINS</span><span class="pun">,</span><span class="pln"> MAIL_SERVER</span><span class="pun">,</span><span class="pln"> MAIL_PORT</span><span class="pun">,</span><span class="pln"> MAIL_USERNAME</span><span class="pun">,</span><span class="pln"> MAIL_PASSWORD

</span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">import</span><span class="pln"> logging
    </span><span class="kwd">from</span><span class="pln"> logging</span><span class="pun">.</span><span class="pln">handlers </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">SMTPHandler</span><span class="pln">
    credentials </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">None</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> MAIL_USERNAME </span><span class="kwd">or</span><span class="pln"> MAIL_PASSWORD</span><span class="pun">:</span><span class="pln">
        credentials </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">MAIL_USERNAME</span><span class="pun">,</span><span class="pln"> MAIL_PASSWORD</span><span class="pun">)</span><span class="pln">
    mail_handler </span><span class="pun">=</span><span class="pln"> </span><span class="typ">SMTPHandler</span><span class="pun">((</span><span class="pln">MAIL_SERVER</span><span class="pun">,</span><span class="pln"> MAIL_PORT</span><span class="pun">),</span><span class="pln"> </span><span class="str">'no-reply@'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> MAIL_SERVER</span><span class="pun">,</span><span class="pln"> ADMINS</span><span class="pun">,</span><span class="pln"> </span><span class="str">'microblog failure'</span><span class="pun">,</span><span class="pln"> credentials</span><span class="pun">)</span><span class="pln">
    mail_handler</span><span class="pun">.</span><span class="pln">setLevel</span><span class="pun">(</span><span class="pln">logging</span><span class="pun">.</span><span class="pln">ERROR</span><span class="pun">)</span><span class="pln">
    app</span><span class="pun">.</span><span class="pln">logger</span><span class="pun">.</span><span class="pln">addHandler</span><span class="pun">(</span><span class="pln">mail_handler</span><span class="pun">)</span></code></pre>
<p>Note that we are only enabling the emails when we run without debugging.</p>
<p>Testing this on a development PC that does not have an email server 
is easy, thanks to Python's SMTP debugging server. Just open a new 
console window (command prompt for Windows users) and run the following 
to start a fake email server:</p>
<pre class="prettyprint"><code><span class="pln">python </span><span class="pun">-</span><span class="pln">m smtpd </span><span class="pun">-</span><span class="pln">n </span><span class="pun">-</span><span class="pln">c </span><span class="typ">DebuggingServer</span><span class="pln"> localhost</span><span class="pun">:</span><span class="lit">25</span></code></pre>
<p>When this is running, the emails sent by the application will be received and displayed in the console window.</p>
<h2>Logging to a file</h2>
<p>Receiving errors via email is nice, but sometimes this isn't enough. 
There are some failure conditions that do not end in an exception and 
aren't a major problem, yet we may want to keep track of them in a log 
in case we need to do some debugging.</p>
<p>For this reason, we are also going to maintain a log file for the application.</p>
<p>Enabling file logging is similar to the email logging (file <code>app/__init__.py</code>):</p>
<pre class="prettyprint"><code><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">import</span><span class="pln"> logging
    </span><span class="kwd">from</span><span class="pln"> logging</span><span class="pun">.</span><span class="pln">handlers </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">RotatingFileHandler</span><span class="pln">
    file_handler </span><span class="pun">=</span><span class="pln"> </span><span class="typ">RotatingFileHandler</span><span class="pun">(</span><span class="str">'tmp/microblog.log'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1024</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span><span class="pln">
    file_handler</span><span class="pun">.</span><span class="pln">setFormatter</span><span class="pun">(</span><span class="pln">logging</span><span class="pun">.</span><span class="typ">Formatter</span><span class="pun">(</span><span class="str">'%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'</span><span class="pun">))</span><span class="pln">
    app</span><span class="pun">.</span><span class="pln">logger</span><span class="pun">.</span><span class="pln">setLevel</span><span class="pun">(</span><span class="pln">logging</span><span class="pun">.</span><span class="pln">INFO</span><span class="pun">)</span><span class="pln">
    file_handler</span><span class="pun">.</span><span class="pln">setLevel</span><span class="pun">(</span><span class="pln">logging</span><span class="pun">.</span><span class="pln">INFO</span><span class="pun">)</span><span class="pln">
    app</span><span class="pun">.</span><span class="pln">logger</span><span class="pun">.</span><span class="pln">addHandler</span><span class="pun">(</span><span class="pln">file_handler</span><span class="pun">)</span><span class="pln">
    app</span><span class="pun">.</span><span class="pln">logger</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">'microblog startup'</span><span class="pun">)</span></code></pre>
<p>The log file will go to our <code>tmp</code> directory, with name <code>microblog.log</code>. We are using the <code>RotatingFileHandler</code>
 so that there is a limit to the amount of logs that are generated. In 
this case we are limiting the size of a log file to one megabyte, and we
 will keep the last ten log files as backups.</p>
<p>The <code>logging.Formatter</code> class provides custom formatting 
for the log messages. Since these messages are going to a file, we want 
them to have as much information as possible, so we write a timestamp, 
the logging level and the file and line number where the message 
originated in addition to the log message and the stack trace.</p>
<p>To make the logging more useful, we are lowering the logging level, 
both in the app logger and the file logger handler, as this will give us
 the opportunity to write useful messages to the log without having to 
call them errors. As an example, we start by logging the application 
start up as an informational level. From now on, each time you start the
 application without debugging the log will record the event.</p>
<p>While we don't have a lot of need for a logger at this time, 
debugging a web server that is online and in use is very difficult. 
Logging messages to a file is an extremely useful tool in diagnosing and
 locating issues, so we are now all ready to go should we need to use 
this feature.</p>
<h2>The bug fix</h2>
<p>Let's fix our <code>nickname</code> duplication bug.</p>
<p>As discussed earlier, there are two places that are currently not handling duplicates. The first is in the <code>after_login</code>
 handler for Flask-Login. This is called when a user successfully logs 
in to the system and we need to create a new User instance. Here is the 
affected snippet of code, with the fix in it (file <code>app/views.py</code>):</p>
<pre class="prettyprint"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> user </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln">
        nickname </span><span class="pun">=</span><span class="pln"> resp</span><span class="pun">.</span><span class="pln">nickname
        </span><span class="kwd">if</span><span class="pln"> nickname </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">None</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> nickname </span><span class="pun">==</span><span class="pln"> </span><span class="str">""</span><span class="pun">:</span><span class="pln">
            nickname </span><span class="pun">=</span><span class="pln"> resp</span><span class="pun">.</span><span class="pln">email</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">'@'</span><span class="pun">)[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">
        nickname </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">.</span><span class="pln">make_unique_nickname</span><span class="pun">(</span><span class="pln">nickname</span><span class="pun">)</span><span class="pln">
        user </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln">nickname </span><span class="pun">=</span><span class="pln"> nickname</span><span class="pun">,</span><span class="pln"> email </span><span class="pun">=</span><span class="pln"> resp</span><span class="pun">.</span><span class="pln">email</span><span class="pun">,</span><span class="pln"> role </span><span class="pun">=</span><span class="pln"> ROLE_USER</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">user</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">commit</span><span class="pun">()</span></code></pre>
<p>The way we solve the problem is by letting the User class pick a unique name for us. This is what the new <code>make_unique_nickname</code> method does (file <code>app/models.py</code>):</p>
<pre class="prettyprint"><code><span class="pln">    </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln">db</span><span class="pun">.</span><span class="typ">Model</span><span class="pun">):</span><span class="pln">
    </span><span class="com"># ...</span><span class="pln">
    </span><span class="lit">@staticmethod</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> make_unique_nickname</span><span class="pun">(</span><span class="pln">nickname</span><span class="pun">):</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="typ">User</span><span class="pun">.</span><span class="pln">query</span><span class="pun">.</span><span class="pln">filter_by</span><span class="pun">(</span><span class="pln">nickname </span><span class="pun">=</span><span class="pln"> nickname</span><span class="pun">).</span><span class="pln">first</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> nickname
        version </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
        </span><span class="kwd">while</span><span class="pln"> </span><span class="kwd">True</span><span class="pun">:</span><span class="pln">
            new_nickname </span><span class="pun">=</span><span class="pln"> nickname </span><span class="pun">+</span><span class="pln"> str</span><span class="pun">(</span><span class="pln">version</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="typ">User</span><span class="pun">.</span><span class="pln">query</span><span class="pun">.</span><span class="pln">filter_by</span><span class="pun">(</span><span class="pln">nickname </span><span class="pun">=</span><span class="pln"> new_nickname</span><span class="pun">).</span><span class="pln">first</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln">
                </span><span class="kwd">break</span><span class="pln">
            version </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> new_nickname
    </span><span class="com"># ...</span></code></pre>
<p>This method simply adds a counter to the requested nickname until a 
unique name is found. For example, if the username "miguel" exists, the 
method will suggest "miguel2", but if that also exists it will go to 
"miguel3" and so on. Note that we coded the method as a <a href="http://docs.python.org/library/functions.html#staticmethod">static method</a>, since it this operation does not apply to any particular instance of the class.</p>
<p>The second place where we have problems with duplicate nicknames is 
the view function for the edit profile page. This one is a little 
tricker to handle, because it is the user choosing the nickname. The 
correct thing to do here is to not accept a duplicated nickname and let 
the user enter another one. We will address this by adding custom 
validation to the nickname form field. If the user enters an invalid 
nickname we'll just fail the validation for the field, and that will 
send the user back to the edit profile page. To add our validation we 
just override the form's <code>validate</code> method (file <code>app/forms.py</code>):</p>
<pre class="prettyprint"><code><span class="kwd">from</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">models </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">User</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">EditForm</span><span class="pun">(</span><span class="typ">Form</span><span class="pun">):</span><span class="pln">
    nickname </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TextField</span><span class="pun">(</span><span class="str">'nickname'</span><span class="pun">,</span><span class="pln"> validators </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">Required</span><span class="pun">()])</span><span class="pln">
    about_me </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TextAreaField</span><span class="pun">(</span><span class="str">'about_me'</span><span class="pun">,</span><span class="pln"> validators </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">Length</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">140</span><span class="pun">)])</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> original_nickname</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">args</span><span class="pun">,</span><span class="pln"> </span><span class="pun">**</span><span class="pln">kwargs</span><span class="pun">):</span><span class="pln">
        </span><span class="typ">Form</span><span class="pun">.</span><span class="pln">__init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">args</span><span class="pun">,</span><span class="pln"> </span><span class="pun">**</span><span class="pln">kwargs</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">original_nickname </span><span class="pun">=</span><span class="pln"> original_nickname

    </span><span class="kwd">def</span><span class="pln"> validate</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="typ">Form</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">False</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">nickname</span><span class="pun">.</span><span class="pln">data </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">original_nickname</span><span class="pun">:</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">True</span><span class="pln">
        user </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">.</span><span class="pln">query</span><span class="pun">.</span><span class="pln">filter_by</span><span class="pun">(</span><span class="pln">nickname </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">nickname</span><span class="pun">.</span><span class="pln">data</span><span class="pun">).</span><span class="pln">first</span><span class="pun">()</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> user </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln">
            </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">nickname</span><span class="pun">.</span><span class="pln">errors</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="str">'This nickname is already in use. Please choose another one.'</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">False</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">True</span></code></pre>
<p>The form constructor now takes a new argument <code>original_nickname</code>. The <code>validate</code>
 method uses it to determine if the nickname has changed or not. If it 
hasn't changed then it accepts it. If it has changed, then it makes sure
 the new nickname does not exist in the database.</p>
<p>Next we add the new constructor argument to the view function:</p>
<pre class="prettyprint"><code><span class="lit">@app</span><span class="pun">.</span><span class="pln">route</span><span class="pun">(</span><span class="str">'/edit'</span><span class="pun">,</span><span class="pln"> methods </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'GET'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'POST'</span><span class="pun">])</span><span class="pln">
</span><span class="lit">@login_required</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> edit</span><span class="pun">():</span><span class="pln">
    form </span><span class="pun">=</span><span class="pln"> </span><span class="typ">EditForm</span><span class="pun">(</span><span class="pln">g</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">nickname</span><span class="pun">)</span><span class="pln">
    </span><span class="com"># ...</span></code></pre>
<p>To complete this change we have to enable field errors to show in our template for the form (file <code>app/templates/edit.html</code>):</p>
<pre class="prettyprint"><code><span class="pln">        </span><span class="tag">&lt;td&gt;</span><span class="pln">Your nickname:</span><span class="tag">&lt;/td&gt;</span><span class="pln">
        </span><span class="tag">&lt;td&gt;</span><span class="pln">
            {{form.nickname(size = 24)}}
            {% for error in form.errors.nickname %}
            </span><span class="tag">&lt;br&gt;&lt;span</span><span class="pln"> </span><span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="pln">color</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">[{{error}}]</span><span class="tag">&lt;/span&gt;</span><span class="pln">
            {% endfor %}
        </span><span class="tag">&lt;/td&gt;</span></code></pre>
<p>Now the bug is fixed and duplicates will be prevented... except when 
they are not. We still have a potential problem with concurrent access 
to the database by two or more threads or processes, but this will be 
the topic of a future article.</p>
<p>At this point you can try again to select a duplicated name to see how the form nicely handles the error.</p>
<h2>Unit testing framework</h2>
<p>To close this session on testing, let's talk about automated testing a bit.</p>
<p>As the application grows in size it gets more and more difficult to ensure that code changes don't break existing functionality.</p>
<p>The traditional approach to prevent regressions is a very good one. 
You write tests that exercise all the different features of the 
application. Each test runs a focused part and verifies that the result 
obtained is the expected one. The tests are executed periodically to 
make sure that the application works as expected. When the test <em>coverage</em>
 is large you can have confidence that modifications and additions do 
not affect the application in a bad way just by running the tests.</p>
<p>We will now build a very simple testing framework using Python's <code>unittest</code> module (file <code>tests.py</code>):</p>
<pre class="prettyprint"><code><span class="com">#!flask/bin/python</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> os
</span><span class="kwd">import</span><span class="pln"> unittest

</span><span class="kwd">from</span><span class="pln"> config </span><span class="kwd">import</span><span class="pln"> basedir
</span><span class="kwd">from</span><span class="pln"> app </span><span class="kwd">import</span><span class="pln"> app</span><span class="pun">,</span><span class="pln"> db
</span><span class="kwd">from</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">models </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">User</span><span class="pln">

</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TestCase</span><span class="pun">(</span><span class="pln">unittest</span><span class="pun">.</span><span class="typ">TestCase</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">def</span><span class="pln"> setUp</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln">
        app</span><span class="pun">.</span><span class="pln">config</span><span class="pun">[</span><span class="str">'TESTING'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">True</span><span class="pln">
        app</span><span class="pun">.</span><span class="pln">config</span><span class="pun">[</span><span class="str">'CSRF_ENABLED'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">False</span><span class="pln">
        app</span><span class="pun">.</span><span class="pln">config</span><span class="pun">[</span><span class="str">'SQLALCHEMY_DATABASE_URI'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'sqlite:///'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">basedir</span><span class="pun">,</span><span class="pln"> </span><span class="str">'test.db'</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">app </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">test_client</span><span class="pun">()</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">create_all</span><span class="pun">()</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> tearDown</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">()</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">drop_all</span><span class="pun">()</span><span class="pln">

    </span><span class="kwd">def</span><span class="pln"> test_avatar</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln">
        u </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln">nickname </span><span class="pun">=</span><span class="pln"> </span><span class="str">'john'</span><span class="pun">,</span><span class="pln"> email </span><span class="pun">=</span><span class="pln"> </span><span class="str">'john@example.com'</span><span class="pun">)</span><span class="pln">
        avatar </span><span class="pun">=</span><span class="pln"> u</span><span class="pun">.</span><span class="pln">avatar</span><span class="pun">(</span><span class="lit">128</span><span class="pun">)</span><span class="pln">
        expected </span><span class="pun">=</span><span class="pln"> </span><span class="str">'http://www.gravatar.com/avatar/d4c74594d841139328695756648b6bd6'</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> avatar</span><span class="pun">[</span><span class="lit">0</span><span class="pun">:</span><span class="pln">len</span><span class="pun">(</span><span class="pln">expected</span><span class="pun">)]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> expected

    </span><span class="kwd">def</span><span class="pln"> test_make_unique_nickname</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln">
        u </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln">nickname </span><span class="pun">=</span><span class="pln"> </span><span class="str">'john'</span><span class="pun">,</span><span class="pln"> email </span><span class="pun">=</span><span class="pln"> </span><span class="str">'john@example.com'</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">u</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">commit</span><span class="pun">()</span><span class="pln">
        nickname </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">.</span><span class="pln">make_unique_nickname</span><span class="pun">(</span><span class="str">'john'</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> nickname </span><span class="pun">!=</span><span class="pln"> </span><span class="str">'john'</span><span class="pln">
        u </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln">nickname </span><span class="pun">=</span><span class="pln"> nickname</span><span class="pun">,</span><span class="pln"> email </span><span class="pun">=</span><span class="pln"> </span><span class="str">'susan@example.com'</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">u</span><span class="pun">)</span><span class="pln">
        db</span><span class="pun">.</span><span class="pln">session</span><span class="pun">.</span><span class="pln">commit</span><span class="pun">()</span><span class="pln">
        nickname2 </span><span class="pun">=</span><span class="pln"> </span><span class="typ">User</span><span class="pun">.</span><span class="pln">make_unique_nickname</span><span class="pun">(</span><span class="str">'john'</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> nickname2 </span><span class="pun">!=</span><span class="pln"> </span><span class="str">'john'</span><span class="pln">
        </span><span class="kwd">assert</span><span class="pln"> nickname2 </span><span class="pun">!=</span><span class="pln"> nickname

</span><span class="kwd">if</span><span class="pln"> __name__ </span><span class="pun">==</span><span class="pln"> </span><span class="str">'__main__'</span><span class="pun">:</span><span class="pln">
    unittest</span><span class="pun">.</span><span class="pln">main</span><span class="pun">()</span></code></pre>
<p>Discussing the <code>unittest</code> module is outside the scope of this article. Let's just say that class <code>TestCase</code> holds our tests. The <code>setUp</code> and <code>tearDown</code>
 methods are special, these are run before and after each test 
respectively. A more complex setup could include several groups of tests
 each represented by a <code>unittest.TestCase</code> subclass, and each group then would have independent <code>setUp</code> and <code>tearDown</code> methods. </p>
<p>These particular <code>setUp</code> and <code>tearDown</code> methods are pretty generic. In <code>setUp</code> the configuration is edited a bit. For instance, we want the testing database to be different that the main database. In <code>tearDown</code> we just reset the database contents.</p>
<p>Tests are implemented as methods. A test is supposed to run some 
function of the application that has a known outcome, and should assert 
if the result is different than the expected one.</p>
<p>So far we have two tests in the testing framework. The first one 
verifies that the Gravatar avatar URLs from the previous article are 
generated correctly. Note how the expected avatar is hardcoded in the 
test and checked against the one returned by the <code>User</code> class.</p>
<p>The second test verifies the <code>make_unique_nickname</code> method we just wrote, also in the <code>User</code>
 class. This test is a bit more elaborate, it creates a new user and 
writes it to the database, then ensures the same name is not allowed as a
 unique name. It then creates a second user with the suggested unique 
name and tries one more time to request the first nickname. The expected
 result for this second part is to get a suggested nickname that is 
different from the previous two.</p>
<p>To run the test suite you just run the <code>tests.py</code> script:</p>
<pre class="prettyprint"><code><span class="pun">./</span><span class="pln">tests</span><span class="pun">.</span><span class="pln">py</span></code></pre>
<p>If there are any errors, you will get a report in the console.</p>
<h2>Final words</h2>
<p>This ends today's discussion of debugging, errors and testing. I hope you found this article useful.</p>
<p>As always, if you have any comments please write below.</p>
<p>The code of the microblog application update with today's changes is available below for download:</p>
<p>Download <a href="https://github.com/miguelgrinberg/microblog/archive/v0.7.zip">microblog-0.7.zip</a>.</p>
<p>As always, the flask virtual environment and the database are not 
included. See previous articles for instructions on how to generate 
them.</p>
<p>I hope to see you again in the next installment of this series.</p>
<p>Thank you for reading!</p>
<p>Miguel</p></div>
<div class="social-mini"><table><tbody><tr>
    <td><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing" data-via="miguelgrinberg" data-count="none">Tweet</a></td>
    <td><g:plusone href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing" size="medium" witdh="100" annotation="none"></g:plusone></td>
    <td><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing"></script></td>
    <td><div style="display: block;" class="fb-like" data-href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false" data-font="verdana"><iframe style="width: 30px; height: 19px; border: 0px none;" id="mmetvsfvmyttsoqmfwldxjvipoyqtodj"></iframe></div></td>
</tr></tbody></table></div>

<h4 style="text-align: right"><a name="comments"></a>40 comments</h4>


<div class="comment">
    <ul>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#1</span> <span class="label label-info">Epsilon</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-08-09T16:03:40Z").fromNow());
                    </script>2 years ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Thank you for 
making this effort.

May I suggest a subject for one of you future entries? I am really 
interested to see how you would structure a larger Flask application. 

A clear explanation of when, how and why to use blueprints and split up 
you app into modules (and how to initialize those) would help a lot. I 
find these things very hard to figure out without some guidance. 
Digging through the Flask mailing list archives reveals other users with
 the same problem. I know of the existence of the large-app-how-to wiki 
page and I browsed through the source of several Flask applications on 
Github/BitBucket, but nothing beats a well guided explanation (imho).

Anyway, I gained an extra RSS feed. :-)</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#2</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-08-10T05:11:07Z").fromNow());
                    </script>2 years ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Epsilon: thanks 
for your comment. I personally don't find blueprints that interesting. 
The way I structure my applications is based on mitsuhiko's large app 
how to, but without the blueprints. This little microblog app is also 
structured like that. For really big apps I just split the views.py, 
models.py and forms.py into multiple files each, but I don't go too 
crazy on splitting things up because then maintaining dependencies 
between modules becomes a nightmare.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#3</span> <span class="label label-info">MIquel</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-08-11T18:03:16Z").fromNow());
                    </script>2 years ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">My congratulations
 for this series of posts!. I'm relatively new to Flask and this is by 
far the best intro I've found. Apart from being quite complete and self 
consistent is written using a good didactic style. I'm looking forward 
forthcoming posts about your microblog application. ¡Enhorabuena!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#4</span> <span class="label label-info">Raj</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-08-14T04:21:10Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great series , I 
am going to follow your articles. Speaking of the login manager with 
Python 2.7 on my setup , had to refer to flask_login as follows 
from flask_login import LoginManager


</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#5</span> <span class="label label-info">Wellington Cordeiro</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-08-17T23:04:25Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">I had an issue early in this post on Windows 7. 
When I run the db_upgrade.py file, after deleting and creating the database. I have this stack trace.
http://dpaste.com/788109/

I'm not quite sure how I can correct this. The database is being deleted. But appears to be still in memory or something.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/eff021ed51af87cd437c7572a3f4fe6c.png"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#6</span> <span class="label label-info">Raj</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-08-17T23:34:23Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Delete the database file. If not connect to db and drop the table. You can connect to SQLite db like this on unix

sqlite3 mydatabase.db
You get to the sqlite3 prompt

&gt;.show tables 
Should see the tables 

Then drop the table

&gt;drop table table name ;

</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/729e26a2a2c7ff24a71958d4aa4e5f35.jpg"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#7</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-08-18T01:34:04Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Wellington: sorry
 about that, I obviously missed it. I have made a small update to the 
db_create.py script, and also updated this page. The problem is really 
that db_create.py is creating the latest version of the database, when 
you run db_upgrade.py after that it tries to create tables that already 
exist in the database. If you just run db_create.py you should be fine, 
but make sure you update your db_create.py script from either the zip 
file or from the database chapter. Sorry about that, I find that no 
matter how much effort I put into testing and proofreading my articles 
there is always something I miss.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#8</span> <span class="label label-info">Marcel</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-12-25T10:00:36Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hi Miguel, I 
really appreciate the effort you put into creating this tutorial. 
There is a small omission in your steps today, however. Since EditForm 
now excepts an argument, original_nickname, views.py needs to be edited 
as well and the current nickname passed in when instantiating EditForm. 
The fix was present in your zip file but is not mentioned here.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/729e26a2a2c7ff24a71958d4aa4e5f35.jpg"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#9</span> <span class="label label-important">Miguel Grinberg</span> said
                    <script type="text/javascript">
                    document.write(moment("2012-12-27T21:51:56Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Marcel: good catch, I have now updated the article. Thanks!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"></div>
            <div class="comment-body">
                <p>
                    <span class="label">#10</span> <span class="label label-info">Dogukan Tufekci</span> said
                    <script type="text/javascript">
                    document.write(moment("2013-01-05T11:30:11Z").fromNow());
                    </script>a year ago:
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hello Miguel! 
Thank you very much for this awesome tutorial. I believe developing an 
exemplary app  is the best way to learn Flask.

My question is in regards to 'Sending errors via email' part: I run the 
app with both run.py and runp.py however I dont seem to receive any 
emails when I activate the 'unique nickname bug'. I'd like to learn how I
 can send the bugs let's say using a gmail account to an admin with 
another gmail account.

Thanks!</p>
                </div>
            </div>
        </li>
        
    </ul>
    <!--
    <table width="100%">
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/15005ce2a86887e768f4718e05be9fb7?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#1</span> <span class="label label-info">Epsilon</span> said
                <script type="text/javascript">
                document.write(moment("2012-08-09T16:03:40Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Thank you for making this effort.

May I suggest a subject for one of you future entries? I am really interested to see how you would structure a larger Flask application. 

A clear explanation of when, how and why to use blueprints and split up you app into modules (and how to initialize those) would help a lot. I find these things very hard to figure out without some guidance. 
Digging through the Flask mailing list archives reveals other users with the same problem. I know of the existence of the large-app-how-to wiki page and I browsed through the source of several Flask applications on Github/BitBucket, but nothing beats a well guided explanation (imho).

Anyway, I gained an extra RSS feed. :-)aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#2</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2012-08-10T05:11:07Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Epsilon: thanks for your comment. I personally don&#39;t find blueprints that interesting. The way I structure my applications is based on mitsuhiko&#39;s large app how to, but without the blueprints. This little microblog app is also structured like that. For really big apps I just split the views.py, models.py and forms.py into multiple files each, but I don&#39;t go too crazy on splitting things up because then maintaining dependencies between modules becomes a nightmare.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/56ac70d8a254255804bd86438e658a41?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#3</span> <span class="label label-info">MIquel</span> said
                <script type="text/javascript">
                document.write(moment("2012-08-11T18:03:16Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">My congratulations for this series of posts!. I&#39;m relatively new to Flask and this is by far the best intro I&#39;ve found. Apart from being quite complete and self consistent is written using a good didactic style. I&#39;m looking forward forthcoming posts about your microblog application. ¡Enhorabuena!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/eff021ed51af87cd437c7572a3f4fe6c?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#4</span> <span class="label label-info">Raj</span> said
                <script type="text/javascript">
                document.write(moment("2012-08-14T04:21:10Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Great series , I am going to follow your articles. Speaking of the login manager with Python 2.7 on my setup , had to refer to flask_login as follows 
from flask_login import LoginManager


aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/93c5a038f8dc3adbf7e82c898a11a1d7?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#5</span> <span class="label label-info">Wellington Cordeiro</span> said
                <script type="text/javascript">
                document.write(moment("2012-08-17T23:04:25Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">I had an issue early in this post on Windows 7. 
When I run the db_upgrade.py file, after deleting and creating the database. I have this stack trace.
http://dpaste.com/788109/

I&#39;m not quite sure how I can correct this. The database is being deleted. But appears to be still in memory or something.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/eff021ed51af87cd437c7572a3f4fe6c?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#6</span> <span class="label label-info">Raj</span> said
                <script type="text/javascript">
                document.write(moment("2012-08-17T23:34:23Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Delete the database file. If not connect to db and drop the table. You can connect to SQLite db like this on unix

sqlite3 mydatabase.db
You get to the sqlite3 prompt

&gt;.show tables 
Should see the tables 

Then drop the table

&gt;drop table table name ;

aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#7</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2012-08-18T01:34:04Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Wellington: sorry about that, I obviously missed it. I have made a small update to the db_create.py script, and also updated this page. The problem is really that db_create.py is creating the latest version of the database, when you run db_upgrade.py after that it tries to create tables that already exist in the database. If you just run db_create.py you should be fine, but make sure you update your db_create.py script from either the zip file or from the database chapter. Sorry about that, I find that no matter how much effort I put into testing and proofreading my articles there is always something I miss.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/ff90a374938f7b7608cb02a8d4080261?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#8</span> <span class="label label-info">Marcel</span> said
                <script type="text/javascript">
                document.write(moment("2012-12-25T10:00:36Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Hi Miguel, I really appreciate the effort you put into creating this tutorial. 
There is a small omission in your steps today, however. Since EditForm now excepts an argument, original_nickname, views.py needs to be edited as well and the current nickname passed in when instantiating EditForm. The fix was present in your zip file but is not mentioned here.aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#9</span> <span class="label label-important">Miguel Grinberg</span> said
                <script type="text/javascript">
                document.write(moment("2012-12-27T21:51:56Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">@Marcel: good catch, I have now updated the article. Thanks!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    <tr>
        <td width="60px"><img src="http://gravatar.com/avatar/bafafefac4abe76b1218317d841e167b?s=60&d=identicon" /></td>
        <td>
            <p>
                <span class="label">#10</span> <span class="label label-info">Dogukan Tufekci</span> said
                <script type="text/javascript">
                document.write(moment("2013-01-05T11:30:11Z").fromNow());
                </script>:
            </p>
            <div style="overflow: auto;">
                <p style="white-space: pre-wrap;">Hello Miguel! Thank you very much for this awesome tutorial. I believe developing an exemplary app  is the best way to learn Flask.

My question is in regards to &#39;Sending errors via email&#39; part: I run the app with both run.py and runp.py however I dont seem to receive any emails when I activate the &#39;unique nickname bug&#39;. I&#39;d like to learn how I can send the bugs let&#39;s say using a gmail account to an admin with another gmail account.

Thanks!aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</p>
            </div>
        </td>
    </tr>
    
    </table>
    -->
</div>

<div class="page">
<ul class="pager">
  <li class="previous disabled">
    <a href="#">««</a>
  </li>
  <li class="previous disabled">
    <a href="#">«</a>
  </li>
  <li class="next">
    <a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing/page/0#comments">»»</a>
  </li>
  <li class="next">
    <a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-vii-unit-testing/page/2#comments">»</a>
  </li>
</ul>
</div>

<h3><a name="commentform"></a>Leave a Comment</h3>
<div class="commentform">
<form class="form-horizontal" method="post" action="#commentform">
<div style="display:none;"><input id="csrf_token" name="csrf_token" value="20140210210122##7569024cd576634f5850a67a34d1b816add46d5e" type="hidden"></div>

<div class="control-group">
    <label class="control-label" for="name">Name <span class="label label-important">*</span></label>
    <div class="controls"><input class="span5" id="name" name="name" type="text"></div>
</div>
<div class="control-group">
    <label class="control-label" for="url">Website</label>
    <div class="controls"><input class="span5" id="url" name="url" type="text"></div>
</div>
<div class="control-group">
    <label class="control-label" for="email">Email <span class="label label-important">*</span></label>
    <div class="controls"><input class="span5" id="email" name="email" type="text"></div>
</div>

<div class="control-group">
    <label class="control-label" for="comment">Comment <span class="label label-important">*</span></label>
    <div class="controls"><textarea class="span5" id="comment" name="comment" rows="4"></textarea><img style="cursor: pointer ! important; display: none ! important; position: absolute ! important; padding: 0px ! important; margin: 0px ! important; border: medium none ! important; width: 28px ! important; height: 14px ! important; opacity: 0.0152174 ! important; left: 664px ! important; top: 13275px ! important;" title="It's All Text!" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/gumdrop.png"></div>
</div>

<div class="control-group">
    <div class="controls">
<script type="text/javascript">var RecaptchaOptions = {"theme": "white", "custom_translations": {"incorrect_try_again": "Incorrect. Try again.", "help_btn": "Help", "cant_hear_this": "Download sound as MP3", "instructions_audio": "Type what you hear:", "instructions_visual": "Type the two words:", "refresh_btn": "Get a new challenge", "play_again": "Play sound again", "visual_challenge": "Get a visual challenge", "audio_challenge": "Get an audio challenge"}};</script>
<script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/challenge.js"></script><script type="text/javascript" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/recaptcha.js"></script><div class=" recaptcha_nothad_incorrect_sol recaptcha_isnot_showing_audio" id="recaptcha_widget_div" style=""><div id="recaptcha_area"><table id="recaptcha_table" class="recaptchatable recaptcha_theme_white"> <tbody><tr> <td colspan="6" class="recaptcha_r1_c1"></td> </tr> <tr> <td class="recaptcha_r2_c1"></td> <td colspan="4" class="recaptcha_image_cell"><center><div style="width: 300px; height: 57px;" id="recaptcha_image"><img id="recaptcha_challenge_image" alt="reCAPTCHA challenge image" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/image.jpg" height="57" width="300"></div></center></td> <td class="recaptcha_r2_c2"></td> </tr> <tr> <td rowspan="6" class="recaptcha_r3_c1"></td> <td colspan="4" class="recaptcha_r3_c2"></td> <td rowspan="6" class="recaptcha_r3_c3"></td> </tr> <tr> <td rowspan="3" class="recaptcha_r4_c1" height="49"> <div class="recaptcha_input_area"> <span style="display: none;" id="recaptcha_challenge_field_holder"><input name="recaptcha_challenge_field" id="recaptcha_challenge_field" value="03AHJ_Vusy8bmd8-arTFjgSn0nkIiPUO0Nx4N1gD_obfomkMD13L0GW6mfIMvwaKyXbJlSajoKLY9H8F8PhG10a66BsDnku8-NLzJ729H3RbhPrLiG5LUXU91EfVD2ryG_JCFPiuvfvmiHtt-eS7K5kRs5Ef0TNz4B-K0KmDTiBRziKy_a8E-O3pk" type="hidden"></span><input autocomplete="off" name="recaptcha_response_field" id="recaptcha_response_field" autocorrect="off" autocapitalize="off" placeholder="Type the two words" type="text"> <span id="recaptcha_privacy" class="recaptcha_only_if_privacy"><a target="_blank" href="http://www.google.com/intl/en/policies/">Privacy &amp; Terms</a></span> </div> </td> <td rowspan="4" class="recaptcha_r4_c2"></td> <td><a title="Get a new challenge" id="recaptcha_reload_btn"><img alt="Get a new challenge" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/refresh.gif" id="recaptcha_reload" height="17" width="25"></a></td> <td rowspan="4" class="recaptcha_r4_c4"></td> </tr> <tr> <td><a title="Get an audio challenge" id="recaptcha_switch_audio_btn" class="recaptcha_only_if_image"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/audio.gif" id="recaptcha_switch_audio" alt="Get an audio challenge" height="16" width="25"></a><a title="Get a visual challenge" id="recaptcha_switch_img_btn" class="recaptcha_only_if_audio"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/text.gif" id="recaptcha_switch_img" alt="Get a visual challenge" height="16" width="25"></a></td> </tr> <tr> <td><a title="Help" id="recaptcha_whatsthis_btn"><img alt="Help" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/help.gif" id="recaptcha_whatsthis" height="16" width="25"></a></td> </tr> <tr> <td class="recaptcha_r7_c1"></td> <td class="recaptcha_r8_c1"></td> </tr> </tbody></table> </div></div>
<noscript>
  <div><iframe src="http://api.recaptcha.net/noscript?k=6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S" height="300" width="500"></iframe></div>
  <div><textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
  <input type="hidden" name="recaptcha_response_field" value="manual_challenge"></div>
</noscript>
</div>
</div>

<div class="control-group">
    <div class="controls"><input name="submit" class="btn btn-primary" value="Post Comment" type="submit"> <span class="help-inline">Note: all comments are screened before they are published. Thank you for your patience!</span></div>
</div>
</form>
</div>


</div>

            </div>
        </div>
        <div class="span4">
            <div id="sidebar">
                <h1>About Miguel</h1>
                <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/miguel.jpg">
                <p>Welcome to my blog!</p>
                <p>I'm a software engineer, photographer and filmmaker in Portland, Oregon, USA.</p>
                <p>You can also find me on <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a>, <a href="https://plus.google.com/u/0/117786742456929977820">Google+</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a> and <a href="https://twitter.com/#%21/miguelgrinberg">Twitter</a>.</p>
                <p>Thank you for visiting!</p>
                <h1>Flask Web Development Book</h1>
                <p>I'm currently writing a book on web development with 
Python and Flask, to be published by O'Reilly Media in 2014. The 
official site for this book is <a href="http://flaskbook.com/">http://flaskbook.com</a>.</p>
                <center><a href="http://flaskbook.com/"><img style="border: 1px solid black;" src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/flask-book-cover-tiny.png"></a></center>
                <h1>Flask Tutorial at PyCon 2014</h1>
                <p>If you want to learn Flask in a class setting then I 
hope you will consider my upcoming tutorial session at PyCon 2014 in 
Montréal on April 10th, 2014. Visit the <a href="https://us.pycon.org/2014/schedule/presentation/54/">tutorial page</a> for more information. I hope to see you there!</p>
                <center><a href="https://us.pycon.org/2014/schedule/presentation/54/"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/pycon2014-blog-image.png"></a></center>
                
                		<h1>Categories</h1>
		<ul>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Arduino/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Arduino">Arduino</a></span> (7)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Blog/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Blog">Blog</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/C++/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/C++">C++</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Cloud/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Cloud">Cloud</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Filmmaking/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Filmmaking">Filmmaking</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Flask/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Flask">Flask</a></span> (28)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Games/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Games RSS Feed" label="Games RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Games">Games</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Gear/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Gear RSS Feed" label="Gear RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Gear">Gear</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/HTML5/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="HTML5 RSS Feed" label="HTML5 RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/HTML5">HTML5</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Heroku/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Heroku">Heroku</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Javascript/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Javascript RSS Feed" label="Javascript RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Javascript">Javascript</a></span> (3)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Movie%20Reviews/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Movie%20Reviews">Movie Reviews</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Netflix/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Netflix RSS Feed" label="Netflix RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Netflix">Netflix</a></span> (5)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Node.js/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Node.js RSS Feed" label="Node.js RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Node.js">Node.js</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Personal/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Personal">Personal</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Photography/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Photography">Photography</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Product%20Reviews/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Product%20Reviews">Product Reviews</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Programming/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Programming">Programming</a></span> (36)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Project%20Management/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Project%20Management">Project Management</a></span> (1)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Python/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Python RSS Feed" label="Python RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Python">Python</a></span> (29)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/REST/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="REST RSS Feed" label="REST RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/REST">REST</a></span> (4)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Raspberry%20Pi/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Raspberry%20Pi">Raspberry Pi</a></span> (4)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/RhinoSteady/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="RhinoSteady RSS Feed" label="RhinoSteady RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/RhinoSteady">RhinoSteady</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Robotics/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Robotics">Robotics</a></span> (6)</li>
		
			<li><a href="http://blog.miguelgrinberg.com/category/Video/feed"><img src="The%20Flask%20Mega-Tutorial,%20Part%20VII_%20Unit%20Testing%20-%20miguelgrinberg.com_files/rss-small.png" title="Video RSS Feed" label="Video RSS Feed"></a> <span class="label label-info"><a href="http://blog.miguelgrinberg.com/category/Video">Video</a></span> (2)</li>
		
		</ul>

                
            </div>
        </div>
    </div>
	<div id="footer">
        <p class="elapsed">This page was generated in 0.108 seconds.</p>
		<p>© 2013 by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster%20_at_%20miguelgrinberg%20_dot_%20com">Questions?</a></p>
	</div>
</div>
<div id="wrap">
</div>
<div style="display: none;" id="cboxOverlay"></div><div style="display: none; padding-bottom: 42px; padding-right: 42px;" class="" id="colorbox"><div id="cboxWrapper"><div><div style="float: left;" id="cboxTopLeft"></div><div style="float: left;" id="cboxTopCenter"></div><div style="float: left;" id="cboxTopRight"></div></div><div style="clear: left;"><div style="float: left;" id="cboxMiddleLeft"></div><div style="float: left;" id="cboxContent"><div style="width: 0px; height: 0px; overflow: hidden; float: left;" id="cboxLoadedContent"></div><div style="float: left;" id="cboxLoadingOverlay"></div><div style="float: left;" id="cboxLoadingGraphic"></div><div style="float: left;" id="cboxTitle"></div><div style="float: left;" id="cboxCurrent"></div><div style="float: left;" id="cboxNext"></div><div style="float: left;" id="cboxPrevious"></div><div style="float: left;" id="cboxSlideshow"></div><div style="float: left;" id="cboxClose"></div></div><div style="float: left;" id="cboxMiddleRight"></div></div><div style="clear: left;"><div style="float: left;" id="cboxBottomLeft"></div><div style="float: left;" id="cboxBottomCenter"></div><div style="float: left;" id="cboxBottomRight"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div></body></html>